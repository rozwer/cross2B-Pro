# SEO記事自動生成システム - 仕様書

**作成日**: 2025年12月9日  
**更新日**: 2025年12月9日  
**バージョン**: 1.1  
**対象読者**: プロジェクト関係者（非技術者向け）

---

## 目次

1. [エグゼクティブサマリー](#1-エグゼクティブサマリー)
2. [現状の課題と解決策](#2-現状の課題と解決策)
3. [システム全体像](#3-システム全体像)
4. [ワークフロー詳細](#4-ワークフロー詳細)
5. [画面イメージ](#5-画面イメージ)
6. [AI（LLM）の使い分け](#6-aillmの使い分け)
7. [データ管理とセキュリティ](#7-データ管理とセキュリティ)
8. [顧客別カスタマイズ](#8-顧客別カスタマイズ)
9. [運用フロー](#9-運用フロー)
10. [導入スケジュール](#10-導入スケジュール)
11. [用語集](#11-用語集)
12. [付録A: 監視・障害対応](#付録a-監視障害対応)

---

## 1. エグゼクティブサマリー

### 1.1 本システムの目的

**複数のAI（Claude、Gemini、GPT）を組み合わせて、SEO最適化された記事を自動生成するシステム**を構築します。

### 1.2 期待される効果

| 項目                  | 現状                   | 導入後                   |
| --------------------- | ---------------------- | ------------------------ |
| 1記事あたりの作成時間 | 約2時間                | 約30分以下               |
| 作業内容              | 手動でファイル受け渡し | 自動処理（一部確認のみ） |
| 品質のばらつき        | 担当者依存             | 一定品質を担保           |
| 同時処理可能数        | 1件ずつ                | 複数件並列処理可能       |

### 1.3 システムの特徴

1. **半自動 + 全自動のハイブリッド構成**
   - 分析フェーズは人間が確認・承認
   - 執筆フェーズは完全自動化

2. **複数AIの最適活用**
   - 各工程に最適なAIを割り当て
   - 新しいAIモデルへの切り替えも容易

3. **他社展開を見据えた設計**
   - 顧客ごとにデータを完全分離
   - 顧客別のカスタマイズに対応

---

## 2. 現状の課題と解決策

### 2.1 現状の作業フロー

```
【現状】各工程で手作業が発生

┌─────────┐    手動     ┌─────────┐    手動     ┌─────────┐
│  工程A  │ ─────────→ │  工程B  │ ─────────→ │  工程C  │
│  (AI)   │  ファイル   │  (AI)   │  ファイル   │  (AI)   │
└─────────┘  コピー     └─────────┘  コピー     └─────────┘
```

**課題一覧**

| #   | 課題                               | 影響                           |
| --- | ---------------------------------- | ------------------------------ |
| 1   | 工程ごとにファイルを手動で受け渡し | 時間がかかる、ミスが起きやすい |
| 2   | 10ファイル添付制限への対応         | 作業が煩雑                     |
| 3   | 各AIへのプロンプト投入が手動       | 担当者の習熟が必要             |
| 4   | 進捗状況が見えにくい               | 管理が困難                     |
| 5   | エラー発生時の対応が属人的         | 品質のばらつき                 |

### 2.2 解決策

```
【導入後】ファイル受け渡しを自動化

┌─────────┐  自動連携   ┌─────────┐  自動連携   ┌─────────┐
│  工程A  │ ─────────→ │  工程B  │ ─────────→ │  工程C  │
│  (AI)   │            │  (AI)   │            │  (AI)   │
└─────────┘            └─────────┘            └─────────┘
     ↑                      ↑                      ↑
     └──────────────────────┴──────────────────────┘
                    進捗をリアルタイム表示
```

**解決策一覧**

| #   | 課題                 | 解決策                                       |
| --- | -------------------- | -------------------------------------------- |
| 1   | 手動ファイル受け渡し | システムが自動で次工程に引き渡し             |
| 2   | 10ファイル制限       | 工程6.5で情報を統合し、以降は1ファイルで完結 |
| 3   | 手動プロンプト投入   | プロンプトをデータベースで管理、自動投入     |
| 4   | 進捗が見えない       | ダッシュボードでリアルタイム表示             |
| 5   | エラー対応が属人的   | 自動リトライ、エラー通知の仕組みを構築       |

---

## 3. システム全体像

### 3.1 システム構成図

```
┌─────────────────────────────────────────────────────────────────┐
│                         利用者                                  │
│                  （ブラウザからアクセス）                         │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                     Webアプリケーション                          │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │                    管理画面                              │   │
│  │  • ワークフロー開始・監視                                │   │
│  │  • 分析結果の確認・承認                                  │   │
│  │  • 生成記事のプレビュー・ダウンロード                     │   │
│  │  • 設定管理（AI設定、プロンプト編集）                     │   │
│  └─────────────────────────────────────────────────────────┘   │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                   バックエンドサーバー                           │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              ワークフローエンジン                         │   │
│  │  • 工程の順序制御                                        │   │
│  │  • 並列処理（工程3A/3B/3C）                              │   │
│  │  • エラー検知・自動リトライ                               │   │
│  │  • 進捗状況の記録                                        │   │
│  └─────────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │              AI連携モジュール                             │   │
│  │  • Claude / Gemini / GPT への接続                        │   │
│  │  • プロンプトの自動投入                                   │   │
│  │  • 出力の検証・保存                                       │   │
│  └─────────────────────────────────────────────────────────┘   │
└───────────────────────────┬─────────────────────────────────────┘
                            │
            ┌───────────────┼───────────────┐
            ▼               ▼               ▼
┌───────────────┐ ┌───────────────┐ ┌───────────────┐
│    Claude     │ │    Gemini     │ │     GPT       │
│  (Anthropic)  │ │   (Google)    │ │   (OpenAI)    │
│               │ │               │ │               │
│ • 構造化が得意 │ │ • 分析が得意  │ │ • 汎用性が高い│
│ • 長文生成    │ │ • Web検索連携 │ │               │
└───────────────┘ └───────────────┘ └───────────────┘
```

### 3.2 データの流れ

```
┌──────────────┐
│ ヒアリング   │  Googleフォームなどで入力
│ シート       │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ キーワード   │  AI分析（Gemini）
│ 選定結果     │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ 競合記事     │  Google検索で収集
│ データ       │
└──────┬───────┘
       │
       ▼
┌──────────────────────────────────────┐
│         並列分析（Gemini）            │
│ ┌────────┐ ┌────────┐ ┌────────┐    │
│ │クエリ  │ │共起語  │ │競合    │    │
│ │分析    │ │抽出    │ │分析    │    │
│ └────────┘ └────────┘ └────────┘    │
└──────────────────┬───────────────────┘
                   │
                   ▼
           【人間による確認・承認】
                   │
                   ▼
┌──────────────┐
│ 戦略的      │  AI生成（Claude）
│ アウトライン │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ 一次情報    │  AI + Web検索（Gemini）
│ 収集        │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ 統合        │  全情報を1ファイルに集約
│ パッケージ  │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ 本文生成    │  AI生成（Claude）
│ （初稿）    │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ ブラッシュ  │  AI編集（Gemini）
│ アップ      │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ ファクト    │  AI検証 + Web検索（Gemini）
│ チェック    │
└──────┬───────┘
       │
       ▼
┌──────────────┐
│ 最終        │  AI編集（Claude）
│ リライト    │
└──────┬───────┘
       │
       ▼
┌──────────────────────────────────────┐
│           最終成果物                  │
│ • 記事本文（Markdown / HTML）         │
│ • メタ情報                            │
│ • 品質レポート                        │
│ • 公開チェックリスト                  │
└──────────────────────────────────────┘
```

---

## 4. ワークフロー詳細

### 4.1 フロー区分

本システムは**2つのフロー**で構成されます。

| フロー       | 工程            | 特徴                       |
| ------------ | --------------- | -------------------------- |
| 半自動フロー | 工程-1 〜 工程3 | 分析結果を人間が確認・承認 |
| 全自動フロー | 工程4 〜 工程10 | 承認後、自動で一気通貫実行 |

```
【半自動フロー】                      【全自動フロー】
人間の確認・判断が必要                承認後は自動で完了

工程-1 ヒアリング                     工程4  アウトライン生成
   ↓                                    ↓
工程0  キーワード選定                 工程5  一次情報収集
   ↓                                    ↓
工程1  競合記事取得                   工程6  アウトライン強化
   ↓                                    ↓
工程2  データ検証                     工程6.5 統合パッケージ化
   ↓                                    ↓
工程3A クエリ分析    ─┐               工程7A 本文生成（初稿）
工程3B 共起語抽出    ─┼─ 並列実行        ↓
工程3C 競合分析     ─┘               工程7B ブラッシュアップ
   ↓                                    ↓
【承認待ち】────────────────────→    工程8  ファクトチェック
                                        ↓
                                    工程9  最終リライト
                                        ↓
                                    工程10 最終出力
```

### 4.2 各工程の説明

#### 【半自動フロー】

| 工程   | 名称           | 内容                                         | 実行方法       |
| ------ | -------------- | -------------------------------------------- | -------------- |
| 工程-1 | ヒアリング     | 事業内容、ターゲット読者、キーワード等を入力 | Googleフォーム |
| 工程0  | キーワード選定 | メインキーワードの確定、戦略タイプの決定     | AI（Gemini）   |
| 工程1  | 競合記事取得   | Google検索上位10サイトの本文を収集           | 自動スクリプト |
| 工程2  | データ検証     | 収集データの妥当性確認                       | AI（Gemini）   |
| 工程3A | クエリ分析     | 検索意図の分析、ペルソナ深掘り               | AI（Gemini）   |
| 工程3B | 共起語抽出     | 関連キーワード100-150個を抽出・分類          | AI（Gemini）   |
| 工程3C | 競合分析       | 競合の文字数、コンテンツギャップ分析         | AI（Gemini）   |

**→ ここで人間が確認・承認**

#### 【全自動フロー】

| 工程    | 名称             | 内容                           | 実行方法     |
| ------- | ---------------- | ------------------------------ | ------------ |
| 工程4   | アウトライン生成 | タイトル候補、記事構造の設計   | AI（Claude） |
| 工程5   | 一次情報収集     | 公的機関等から最新データを収集 | AI + Web検索 |
| 工程6   | アウトライン強化 | 一次情報を組み込んだ構成に改善 | AI（Claude） |
| 工程6.5 | 統合パッケージ化 | 全情報を1つのファイルに集約    | AI（Claude） |
| 工程7A  | 本文生成（初稿） | 記事本文の執筆                 | AI（Claude） |
| 工程7B  | ブラッシュアップ | 読みやすさの向上               | AI（Gemini） |
| 工程8   | ファクトチェック | データの検証、FAQ生成          | AI + Web検索 |
| 工程9   | 最終リライト     | 文字数調整、品質スコア算出     | AI（Claude） |
| 工程10  | 最終出力         | 公開用ファイル一式を生成       | AI（Claude） |

### 4.3 人間確認ポイント

**タイミング**: 工程3（分析フェーズ）完了後

**確認内容**:

1. クエリ分析結果（検索意図、ペルソナ）が適切か
2. 共起語の抽出・分類が妥当か
3. 競合分析の結果に問題がないか
4. 文字数目標が適切か

**通知方法**:

- Slack通知（自動送信）
- 管理画面上でも確認可能

**操作**:

- 管理画面で「承認」ボタンをクリック
- → 工程4以降が自動開始

---

## 5. 画面イメージ

### 5.1 ダッシュボード（トップ画面）

```
┌──────────────────────────────────────────────────────────────────┐
│  SEO記事自動生成システム                          [設定] [ログアウト]│
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📊 ワークフロー一覧                           [+ 新規作成]       │
│                                                                  │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ ID        │ キーワード           │ 状態      │ 進捗  │ 操作 │ │
│  ├───────────┼──────────────────────┼───────────┼───────┼──────┤ │
│  │ WF-001    │ ドライバー 採用 難しい │ ✅ 完了   │ 100%  │ [詳細]│ │
│  │ WF-002    │ 物流 人手不足 対策    │ ⏸ 承認待ち│ 30%   │ [承認]│ │
│  │ WF-003    │ 倉庫 作業効率化      │ ⚙️ 実行中 │ 65%   │ [詳細]│ │
│  │ WF-004    │ 配送 コスト削減      │ ❌ エラー │ 45%   │ [再実行]│
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  📈 今月の実績                                                   │
│  ┌──────────────┬──────────────┬──────────────┐                │
│  │  生成記事数   │  平均所要時間  │  成功率      │                │
│  │     12本     │    28分      │   95%       │                │
│  └──────────────┴──────────────┴──────────────┘                │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 5.2 ワークフロー詳細画面

```
┌──────────────────────────────────────────────────────────────────┐
│  ← 戻る    WF-003: 倉庫 作業効率化                               │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  📋 基本情報                                                     │
│  ┌────────────────────────────────────────────────────────────┐ │
│  │ キーワード: 倉庫 作業効率化                                  │ │
│  │ 目標文字数: 10,000字                                        │ │
│  │ 開始日時:   2025/12/09 10:30                                │ │
│  │ 状態:       ⚙️ 実行中（工程7A: 本文生成）                    │ │
│  └────────────────────────────────────────────────────────────┘ │
│                                                                  │
│  📊 進捗状況                                                     │
│                                                                  │
│  工程-1 ヒアリング        ████████████████████ 100% ✅           │
│  工程0  キーワード選定     ████████████████████ 100% ✅           │
│  工程1  競合記事取得       ████████████████████ 100% ✅           │
│  工程2  データ検証         ████████████████████ 100% ✅           │
│  工程3  分析（並列）       ████████████████████ 100% ✅           │
│  ────────────────── 承認済み ──────────────────                  │
│  工程4  アウトライン       ████████████████████ 100% ✅           │
│  工程5  一次情報収集       ████████████████████ 100% ✅           │
│  工程6  アウトライン強化   ████████████████████ 100% ✅           │
│  工程6.5 統合パッケージ    ████████████████████ 100% ✅           │
│  工程7A 本文生成          █████████████░░░░░░░  65% ⚙️           │
│  工程7B ブラッシュアップ   ░░░░░░░░░░░░░░░░░░░░  0%  ⏳           │
│  工程8  ファクトチェック   ░░░░░░░░░░░░░░░░░░░░  0%  ⏳           │
│  工程9  最終リライト       ░░░░░░░░░░░░░░░░░░░░  0%  ⏳           │
│  工程10 最終出力          ░░░░░░░░░░░░░░░░░░░░  0%  ⏳           │
│                                                                  │
│  ⏱️ 経過時間: 18分 ｜ 推定残り時間: 約10分                        │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 5.3 承認画面

```
┌──────────────────────────────────────────────────────────────────┐
│  ← 戻る    WF-002: 承認待ち                                      │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ⚠️ 分析結果の確認をお願いします                                  │
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ 📌 工程3A: クエリ分析結果                          [詳細を見る]││
│  │                                                             ││
│  │ • 検索意図: Know（情報収集目的）                             ││
│  │ • ペルソナ: 物流企業の経営者・管理職（40-50代）               ││
│  │ • 心理状態: 人手不足に危機感、解決策を探している              ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ 📌 工程3B: 共起語抽出結果                          [詳細を見る]││
│  │                                                             ││
│  │ • 抽出数: 127個                                             ││
│  │ • Essential（必須）: 25個                                   ││
│  │ • Standard（標準）: 72個                                    ││
│  │ • Unique（差別化）: 30個                                    ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ 📌 工程3C: 競合分析結果                            [詳細を見る]││
│  │                                                             ││
│  │ • 競合平均文字数: 8,500字                                   ││
│  │ • 推奨文字数: 10,000字（競合+18%）                          ││
│  │ • コンテンツギャップ: 3項目発見                              ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│                                                                  │
│         [キャンセル]                    [✅ 承認して続行]          │
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

### 5.4 完了画面（成果物ダウンロード）

```
┌──────────────────────────────────────────────────────────────────┐
│  ← 戻る    WF-001: 完了                                          │
├──────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ✅ 記事生成が完了しました                                        │
│                                                                  │
│  📄 生成された記事                                                │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ タイトル: ドライバー採用が難しい5つの理由と今すぐできる対策    ││
│  │ 文字数:   9,850字（目標: 10,000字 / 達成率: 98.5%）          ││
│  │ 品質スコア: 0.92 / 1.00                                      ││
│  │ 所要時間:  27分                                              ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│  📁 ダウンロード                                                  │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ [📄 記事本文（Markdown）]  [📄 記事本文（HTML）]              ││
│  │ [📊 メタ情報]             [📋 公開チェックリスト]             ││
│  │ [📈 品質レポート]         [📦 全ファイル一括]                 ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
│  👁️ プレビュー                                                   │
│  ┌─────────────────────────────────────────────────────────────┐│
│  │ # ドライバー採用が難しい5つの理由と今すぐできる対策           ││
│  │                                                             ││
│  │ 「求人を出しても応募が来ない」「せっかく採用してもすぐ辞め   ││
│  │ てしまう」──物流業界の人事担当者なら、誰もが一度は経験した   ││
│  │ ことがある悩みではないでしょうか。                           ││
│  │                                                             ││
│  │ 本記事では、ドライバー採用が難しい根本的な原因を解説し...    ││
│  │                                              [続きを読む ↓]  ││
│  └─────────────────────────────────────────────────────────────┘│
│                                                                  │
└──────────────────────────────────────────────────────────────────┘
```

---

## 6. AI（LLM）の使い分け

### 6.1 基本方針

各工程に**最適なAIを割り当て**、品質と効率を最大化します。

### 6.2 AI割り当て一覧

| 工程                       | 使用AI | 選定理由                        |
| -------------------------- | ------ | ------------------------------- |
| 工程0（キーワード選定）    | Gemini | 分析精度が高い                  |
| 工程2（データ検証）        | Gemini | データ処理が安定                |
| 工程3A/B/C（分析）         | Gemini | 並列処理、Web検索との連携が得意 |
| 工程4（アウトライン）      | Claude | 構造化された出力が得意          |
| 工程5（一次情報収集）      | Gemini | Web検索機能を活用               |
| 工程6（アウトライン強化）  | Claude | 情報の統合・再構成が得意        |
| 工程6.5（統合）            | Claude | 複雑な情報整理が得意            |
| 工程7A（本文生成）         | Claude | 長文執筆の品質が高い            |
| 工程7B（ブラッシュアップ） | Gemini | 自然な表現への改善が得意        |
| 工程8（ファクトチェック）  | Gemini | Web検索による検証が得意         |
| 工程9（最終リライト）      | Claude | 品質管理が得意                  |
| 工程10（最終出力）         | Claude | 整形された出力が得意            |

### 6.3 AIの特性比較

```
┌─────────────────────────────────────────────────────────────────┐
│                      AI特性比較                                 │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  Claude（Anthropic）                                            │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │ 得意: 構造化出力、長文生成、品質管理、複雑な統合作業       │ │
│  │ 用途: 記事の骨格作成、本文執筆、最終仕上げ                 │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  Gemini（Google）                                               │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │ 得意: データ分析、Web検索連携、自然な表現、並列処理        │ │
│  │ 用途: 情報収集・分析、ファクトチェック、表現の改善         │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  GPT（OpenAI）                                                  │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │ 得意: 汎用的なタスク、幅広い知識                           │ │
│  │ 用途: 必要に応じて柔軟に活用（現状は予備）                 │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

### 6.4 モデルの切り替え

**新しいAIモデルが登場した際にも、簡単に切り替えられる設計**としています。

| 設定項目     | 説明                                   |
| ------------ | -------------------------------------- |
| プロバイダー | Claude / Gemini / GPT / その他         |
| モデルクラス | Pro（最上位）/ Standard（標準）        |
| 思考モデル   | 推論過程を出力するモデルを使うかどうか |

**切り替え例**:

- 「工程7Aの本文生成を、より高性能なProクラスに変更したい」
- 「新しく登場したモデルを工程4で試したい」
- → 管理画面から設定変更のみで対応可能

---

## 7. データ管理とセキュリティ

### 7.1 データ分離方針

**顧客ごとにデータベースを完全分離**します。

```
┌─────────────────────────────────────────────────────────────────┐
│                     システム全体                                │
│  ┌───────────────────────────────────────────────────────────┐ │
│  │                   共通管理領域                             │ │
│  │  • システム設定                                           │ │
│  │  • AIプロバイダー設定                                     │ │
│  │  • 顧客マスター                                           │ │
│  └───────────────────────────────────────────────────────────┘ │
│                                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐           │
│  │  顧客A      │  │  顧客B      │  │  顧客C      │           │
│  │  専用DB     │  │  専用DB     │  │  専用DB     │           │
│  │             │  │             │  │             │           │
│  │ • 記事データ│  │ • 記事データ│  │ • 記事データ│           │
│  │ • プロンプト│  │ • プロンプト│  │ • プロンプト│           │
│  │ • 実行履歴  │  │ • 実行履歴  │  │ • 実行履歴  │           │
│  │ • APIキー   │  │ • APIキー   │  │ • APIキー   │           │
│  └─────────────┘  └─────────────┘  └─────────────┘           │
│        ↑                ↑                ↑                    │
│        └────────────────┴────────────────┘                    │
│                 相互にアクセス不可                              │
└─────────────────────────────────────────────────────────────────┘
```

**メリット**:

- 他の顧客のデータに絶対にアクセスできない
- 顧客ごとのバックアップ・削除が容易
- 将来的に顧客専用サーバーへの移行も可能

### 7.2 セキュリティ対策

| 対策項目      | 内容                                 |
| ------------- | ------------------------------------ |
| 通信の暗号化  | 全ての通信をHTTPS（TLS）で暗号化     |
| APIキーの保護 | 顧客のAI APIキーは暗号化して保存     |
| アクセス制御  | ログイン必須、顧客ごとのアクセス制限 |
| 権限管理      | ロール別の操作権限（下表参照）       |
| 監査ログ      | 誰がいつ何をしたかを記録             |

**ユーザー権限（ロール）**:

| ロール               | できること                               |
| -------------------- | ---------------------------------------- |
| 管理者（admin）      | 全ての操作（設定変更、ユーザー管理含む） |
| 運用担当（operator） | ワークフロー実行・承認・再実行           |
| 閲覧者（viewer）     | 閲覧・ダウンロードのみ                   |

### 7.3 APIキーの管理

**顧客が自身のAPIキーを登録**する方式を採用します。

**保管ポリシー**:

- APIキーは暗号化して保存（平文での保持は行いません）
- ワークフロー実行時のみ復号して使用
- 二次利用・外部への送信は行いません
- 顧客からの削除要求に即時対応可能

**メリット**:

- AIの利用料金は顧客が直接負担
- 顧客ごとの利用量管理が明確

**登録の流れ**:

1. 顧客がAIプロバイダー（Anthropic, Google等）と契約
2. 発行されたAPIキーを管理画面から登録
3. システムが暗号化して安全に保存
4. ワークフロー実行時に自動で使用

---

## 8. 顧客別カスタマイズ

### 8.1 カスタマイズ可能な項目

| カテゴリ   | 項目             | 説明                         |
| ---------- | ---------------- | ---------------------------- |
| AI設定     | 工程別AI選択     | 特定の工程で使用するAIを変更 |
| AI設定     | モデルクラス     | Standard / Proの選択         |
| プロンプト | 工程別プロンプト | 独自のプロンプトに差し替え   |
| 出力設定   | 文字数目標       | デフォルトの目標文字数       |
| 出力設定   | CTA設計          | 問い合わせ誘導の配置・文言   |
| 通知設定   | Slack連携先      | 承認通知の送信先             |

### 8.2 カスタマイズの進め方

**基本的に当社側で設定を行います**。

```
┌─────────────┐     要望      ┌─────────────┐     設定      ┌─────────┐
│   顧客      │ ───────────→ │   当社      │ ───────────→ │ システム │
│             │              │（開発チーム）│              │         │
└─────────────┘              └─────────────┘              └─────────┘
                                    │
                                    ↓
                            テスト実行で確認
                                    │
                                    ↓
                               本番適用
```

**理由**:

- プロンプトの調整には専門知識が必要
- 不適切な設定による品質低下を防止
- 顧客の運用負荷を軽減

---

## 9. 運用フロー

### 9.1 通常の運用フロー

```
┌─────────────────────────────────────────────────────────────────┐
│ 1. ヒアリング入力                                               │
│    担当者がGoogleフォームに記事要件を入力                        │
│    （事業内容、キーワード、ターゲット読者など）                   │
└───────────────────────────┬─────────────────────────────────────┘
                            │ 自動
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│ 2. 分析フェーズ（半自動）                                        │
│    工程0〜3が自動実行（約10分）                                  │
└───────────────────────────┬─────────────────────────────────────┘
                            │ Slack通知
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│ 3. 確認・承認                                                    │
│    担当者が分析結果を確認し、管理画面で承認ボタンをクリック       │
└───────────────────────────┬─────────────────────────────────────┘
                            │ 自動
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│ 4. 執筆フェーズ（全自動）                                        │
│    工程4〜10が自動実行（約20分）                                 │
└───────────────────────────┬─────────────────────────────────────┘
                            │ Slack通知
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│ 5. 成果物受け取り                                                │
│    管理画面から記事ファイルをダウンロード                        │
│    → CMS投入、公開作業へ                                        │
└─────────────────────────────────────────────────────────────────┘
```

### 9.2 エラー発生時の対応

| 状況           | システムの動作              | ユーザーの対応     |
| -------------- | --------------------------- | ------------------ |
| AI応答遅延     | 自動でリトライ（最大3回）   | 待機（自動復旧）   |
| AI応答エラー   | Slack通知、画面にエラー表示 | 管理画面から再実行 |
| 出力形式エラー | 自動で再実行                | 待機（自動復旧）   |
| 工程7A失敗     | 工程7Aのみ再実行可能        | 管理画面から再実行 |

### 9.3 よくある質問（運用編）

**Q: 夜間や休日に実行できますか？**
A: はい。システムは24時間稼働しています。ただし、承認が必要なため、全自動フローに進むのは承認後となります。

**Q: 同時に複数の記事を生成できますか？**
A: はい。複数のワークフローを並列で実行可能です。

**Q: 途中でキャンセルできますか？**
A: はい。管理画面からキャンセルできます。それまでに生成されたファイルは保存されます。

**Q: 過去の生成記事は保存されますか？**
A: はい。全ての生成記事と中間ファイルが保存され、いつでもダウンロード可能です。

---

## 10. 導入スケジュール

### 10.1 全体スケジュール

```
Week 1-2    Week 3-5    Week 6-7    Week 8-9    Week 10
   │           │           │           │           │
   ▼           ▼           ▼           ▼           ▼
┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐   ┌──────┐
│基盤  │   │コア  │   │画面  │   │運用  │   │顧客  │
│構築  │   │機能  │   │開発  │   │機能  │   │対応  │
└──────┘   └──────┘   └──────┘   └──────┘   └──────┘
```

### 10.2 フェーズ別詳細

| フェーズ | 期間  | 内容         | 成果物                   |
| -------- | ----- | ------------ | ------------------------ |
| Phase 1  | 2週間 | 基盤構築     | 動作するプロトタイプ     |
| Phase 2  | 3週間 | コア機能実装 | 全工程が動作するシステム |
| Phase 3  | 2週間 | 画面開発     | 管理画面一式             |
| Phase 4  | 2週間 | 運用機能     | 設定画面、監視機能       |
| Phase 5  | 1週間 | 顧客対応     | マルチテナント対応       |

**合計: 約10週間（2.5ヶ月）**

### 10.3 マイルストーン

| 時期    | マイルストーン   | 確認内容                     |
| ------- | ---------------- | ---------------------------- |
| Week 2  | プロトタイプ完成 | 1工程が正常に動作すること    |
| Week 5  | コア機能完成     | 全工程が連続して動作すること |
| Week 7  | 画面完成         | 管理画面から操作できること   |
| Week 9  | 運用機能完成     | 設定変更、監視ができること   |
| Week 10 | 本番リリース     | 実運用可能な状態             |

---

## 11. 用語集

| 用語             | 説明                                                        |
| ---------------- | ----------------------------------------------------------- |
| ワークフロー     | 記事生成の一連の処理の流れ                                  |
| 工程             | ワークフローを構成する個々の処理ステップ                    |
| LLM              | Large Language Model（大規模言語モデル）。AI のこと         |
| プロンプト       | AIに与える指示文                                            |
| 共起語           | あるキーワードと一緒によく使われる関連語                    |
| CTA              | Call To Action。読者に行動を促す要素（問い合わせボタン等）  |
| 4本柱            | 記事品質を担保する4つの観点（神経科学/行動経済学/LLMO/KGI） |
| ファクトチェック | 記事内のデータや事実の正確性を検証すること                  |
| マルチテナント   | 1つのシステムで複数の顧客（テナント）に対応する仕組み       |
| APIキー          | AIサービスを利用するための認証情報                          |

---

## 付録A: 監視・障害対応

### 障害検知と通知

システムは自動で障害を検知し、運用チームに通知します。

| 障害の種類             | 通知タイミング     | 通知先   |
| ---------------------- | ------------------ | -------- |
| 工程の失敗（初回）     | 自動リトライ開始時 | ログのみ |
| 3回リトライ後も失敗    | 即時               | Slack    |
| 処理のタイムアウト     | 即時               | Slack    |
| データベース接続エラー | 即時               | Slack    |

### バックアップと復旧

| 項目                      | 内容           |
| ------------------------- | -------------- |
| バックアップ頻度          | 毎日自動実行   |
| 復旧目標時間（RTO）       | 4時間以内      |
| データ損失許容範囲（RPO） | 24時間以内     |
| 生成ファイル保持期間      | 無期限（当面） |
| ログ保持期間              | 90日           |

---

## 付録B: お問い合わせ

本仕様書に関するご質問・ご要望は、担当者までご連絡ください。

---

**文書管理**

| 版  | 日付       | 変更内容                                 | 作成者 |
| --- | ---------- | ---------------------------------------- | ------ |
| 1.0 | 2025/12/09 | 初版作成                                 | -      |
| 1.1 | 2025/12/09 | セキュリティ強化、監視・バックアップ追加 | -      |

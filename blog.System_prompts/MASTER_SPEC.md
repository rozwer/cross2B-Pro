# SEO記事自動生成システム マスター仕様書 (Ver8.3)

**更新日**: 2026-01-08
**バージョン**: 8.3

---

## 1. システム概要

### 1.1 目的
単なるキーワード網羅的な記事ではなく、**「読者の無意識に訴えかけ、行動を変容させる（CVさせる）」**高品質なSEO記事を、AIと自動化技術を用いて効率的に生産する。

### 1.2 Ver8.3の主要アップデート
| 項目 | 内容 |
|-----|------|
| 人間味の注入（工程3.5） | 心理描写や体験エピソードを意図的に組み込み、AI特有の無機質さを解消 |
| 網羅性の向上（工程1.5） | 関連キーワード（サジェスト）の競合情報もGASで収集 |
| CTR向上（工程4） | 32文字制限、隅付き括弧使用などのタイトルルール厳格化 |
| 信頼性の担保 | 脚注・出典情報のMarkdown形式での統一管理 |

---

## 2. コア・フィロソフィー（4本柱）

### ① 神経科学 (Neuroscience)
脳の認知負荷を最小限に抑え、読了率を高める設計。
- **F型スキャン対策**: 重要情報を左上に配置
- **ドーパミン報酬系**: 「続きが気になる」問いかけで読むこと自体に快感を与える
- **リズムと間**: 短文と長文の意図的な混在で脳を飽きさせない

### ② 行動経済学 (Behavioral Economics)
読者の非合理な意思決定バイアスを利用し、CVへ誘導。
- **損失回避性**: 「これをしないと損をする」という切り口
- **社会的証明**: 口コミや多数派の意見で安心感を醸成
- **権威性**: 信頼できるデータや専門家の意見を提示
- **現在志向バイアス**: 「今すぐ得られるメリット」を強調

### ③ LLMO (Large Language Model Optimization)
AI検索エンジン（Google SGE/Gemini/Bing Chat）に引用されやすくする最適化。
- **構造化データ**: リスト、表、明確な定義を多用
- **信頼性シグナル**: 一次情報、統計データ、具体的な出典を明記
- **アンサーパッセージ**: 検索クエリへの直接的な回答をセクション冒頭に配置

### ④ KGI志向 (Key Goal Indicator)
記事の存在意義である「成果」にコミット。
- **CVR最大化**: 全セクションが最終CTAへの布石となる設計
- **検索意図の充足**: 顕在ニーズだけでなく潜在ニーズまで満たす

---

## 3. システムアーキテクチャ

### 3.1 技術スタック
| 役割 | 技術 |
|-----|------|
| 自動化・収集 | Google Apps Script (GAS) |
| 分析・構成 | Google Gemini 1.5 Pro（大量テキスト処理に強い） |
| 執筆・リライト | Anthropic Claude 3.5 Sonnet（日本語の自然さに強い） |
| データ管理 | ローカルファイルシステム (JSON / Markdown / CSV) |

### 3.2 基本設計思想
- **ファイルベース管理**: 各工程の入出力はファイルとして保存（ステートレス設計）
- **Human-in-the-loop**: 各工程の合間で人間が確認・修正可能（工程4以降は一気通貫も可）
- **LLM使い分け**: 処理特性に応じてGeminiとClaudeを適材適所で使用

### 3.3 ディレクトリ構造
```
SEO_AI_ver8.3/
├── 工程0_キーワード選定/
├── 工程1_競合記事取得GAS/
├── 工程1.5_関連KW競合取得GAS/   ← Ver8.3 New
├── 工程2_CSV読み込み・初期化/
├── 工程3A_クエリ分析/
├── 工程3B_共起語抽出/
├── 工程3C_競合分析/
├── 工程3.5_心情感情・人間味・体験エピソード/  ← Ver8.3 New
├── 工程4_戦略的アウトライン/
├── 工程5_一次情報追加・知識ギャップ解消/
├── 工程6_アウトライン再生成/
├── 工程6.5_構成案作成/
├── 工程7A_本文生成_初稿/
├── 工程7B_本文生成_ブラッシュアップ/
├── 工程8_ファクトチェック・FAQ生成/
├── 工程9_最終リライト・品質向上/
├── 工程10_SEO記事完成・最終出力/
├── 工程11_推奨画像差し込み提案/
└── 工程12_WordPress用HTML生成/
```

---

## 4. 工程別詳細仕様

### Phase 1: データ収集・分析

#### 工程0: キーワード選定
- **目的**: 記事の方向性、ターゲット、ゴールを確定（＝「憲法」制定）
- **入力**: ユーザー要件（フォーム回答等）
- **出力**: `工程0_キーワード選定結果.json`

#### 工程1: 競合記事スクレイピング (GAS)
- **目的**: メインKWの上位10サイトの本文・見出しを取得
- **ツール**: `上位10サイト競合記事本文取得.gs`
- **出力**: `工程1_1.1統合_上位10サイト競合記事本文.csv`

#### 工程1.5: 関連KW競合取得 (GAS) ★Ver8.3
- **目的**: 関連キーワードの上位記事情報を取得し、情報の網羅性を担保
- **入力**: `工程0_キーワード選定結果.json`
- **出力**: `工程1.5_関連KW競合抽出.json`

#### 工程2: CSV読み込み・初期化
- **目的**: 収集データを正規化・要約してトークン節約
- **入力**: 工程0, 1, 1.5
- **出力**: なし（レポートのみ）

### Phase 2: 深層分析

#### 工程3A: クエリ分析・ペルソナ深掘り
- **目的**: 検索意図の裏にある不安・悩み・理想を深掘り
- **入力**: 工程0, 1(CSV)
- **出力**: `工程3A_クエリ分析結果.json`

#### 工程3B: 共起語・関連キーワード抽出
- **目的**: SEO的に含めるべき重要キーワードを抽出
- **入力**: 工程0, 1(CSV)
- **出力**: `工程3B_共起語抽出結果.json`

#### 工程3C: 競合分析・差別化切り口発見
- **目的**: 競合の構成を分解し、差別化ポイントを特定
- **入力**: 工程0, 1(CSV)
- **出力**: `工程3C_競合分析結果.json`

#### 工程3.5: 人間味・感情生成 ★Ver8.3
- **目的**: 読者の共感を呼ぶ「人間味」を生成
- **入力**: 工程0, 1(CSV), 1.5, 3A, 3B, 3C（計6ファイル）
- **出力**: `工程3.5_人間味.json`
- **生成内容**: 心の声、失敗談、あるあるエピソード、成功体験、共感フレーズ

### Phase 3: 構成・執筆

#### 工程4: 戦略的アウトライン生成
- **目的**: 4本柱に基づく骨子を作成
- **入力**: 工程0〜3.5（計7ファイル）
- **出力**: `工程4_戦略的アウトライン.json`
- **タイトルルール**: 32文字以内、隅付き括弧使用、数字入り

#### 工程5: 一次情報追加・知識ギャップ解消
- **目的**: 不足している統計データ・信頼できる根拠を補完
- **入力**: 工程0〜4（計8ファイル）
- **出力**: `工程5_一次情報収集結果.json`

#### 工程6: アウトライン強化
- **目的**: 一次情報を組み込みアウトラインを完成形に
- **入力**: 工程0〜5（計9ファイル）
- **出力**: `工程6_アウトライン強化版.json`

#### 工程6.5: 構成案作成 ★ハブ工程
- **目的**: 本文執筆のための詳細設計図（Markdown）を作成
- **入力**: 全10ファイル（**ファイル添付数上限**）
- **出力**: `工程6.5_構成案.md`
- **重要**: ここで累積JSON方式から直接参照方式に切り替え

#### 工程7A: 本文生成（初稿）
- **目的**: 構成案に従い各セクションを執筆
- **入力**: 工程0, 3A, 3B, 3C, 3.5, 5, 6, 6.5（計8ファイル）※直接参照方式
- **出力**: `工程7A_本文初稿.md`

#### 工程7B: 本文ブラッシュアップ
- **目的**: 文章のリズム・読みやすさを改善
- **入力**: 工程3.5, 6.5, 7A
- **出力**: `工程7B_本文ブラッシュアップ版.md`

### Phase 4: 仕上げ

#### 工程8: ファクトチェック + FAQ生成
- **目的**: 情報の正確性を検証し、FAQを作成
- **入力**: 工程0, 5, 6.5, 7B
- **出力**: `工程8_ファクトチェック結果.json`, `工程8_FAQ統合版.md`

#### 工程9: 最終リライト・品質向上
- **目的**: ファクトチェック結果を反映し完成度を高める
- **入力**: 工程0, 5, 6.5, 8(json), 8(md)
- **出力**: `工程9_最終リライト版.md`, `工程9_修正レポート.json`

#### 工程10: 最終出力
- **目的**: 最終成果物を出力
- **入力**: 工程0, 6.5, 9(md), 9(json)
- **出力**:
  - `工程10_final_article.md`
  - `工程10_meta_info.json`
  - `工程10_publication_checklist.md`
  - `工程10_comprehensive_report.json`
- **重要処理**: 脚注番号を上から順に振り直し

#### 工程11: 推奨画像提案
- **目的**: 画像挿入位置と画像生成プロンプトを提案
- **入力**: 工程0, 3A, 6.5, 10(md), 10(json)
- **出力**: `工程11_推奨画像提案.md`

#### 工程12: WordPress用HTML生成
- **目的**: WordPressにそのまま貼り付け可能なHTMLを生成
- **入力**: 工程0, 6.5, 10(md), 10(json), 11
- **出力**: `工程12_WordPress用HTML.html`
- **処理**: 目次id付与、外部リンク属性設定、脚注双方向リンク実装

---

## 5. データ構造定義 (TypeScript)

### 5.1 プロジェクト設定
```typescript
interface ProjectConfig {
  keyword: string;
  targetWordCount: number;
  wordCountMode: 'ai_seo_optimized';
  fourPillarsEvaluation: {
    neuroscience: { purchasePhase: string };
    behavioralEconomics: { principles: string[] };
    llmo: { tokenTargetPerSection: { min: number; max: number } };
    kgi: { cvrExpectation: string };
  };
}
```

### 5.2 工程3A出力
```typescript
interface Step3AOutput {
  searchIntent: { primary: string; secondary: string[] };
  personaDeepDive: {
    emotionalState: { anxiety: string; expectation: string };
    behavioralEconomicsProfile: { lossAversion: string; socialProof: string };
  };
}
```

### 5.3 工程3.5出力
```typescript
interface Step3_5Output {
  innerVoice: { anxiety: string[]; hope: string[] };
  experienceEpisodes: Array<{
    type: string;
    summary: string;
    emotionalLesson: string;
  }>;
  empathyPhrases: string[];
}
```

### 5.4 工程4出力
```typescript
interface Step4Output {
  titleCandidates: Array<{ title: string; rationale: string }>; // 32文字以内
  sections: Array<{
    h2: string;
    wordCountTarget: number;
    fourPillars: { behavioralEconomics: string; kgi: string };
    subsections: Array<{ h3: string; keyPoints: string[] }>;
  }>;
}
```

### 5.5 工程10メタ情報
```typescript
interface Step10MetaInfo {
  finalWordCount: number;
  footnotes: Array<{ id: number; source: string; url?: string }>;
}
```

---

## 6. 実装ルール

### 6.1 ファイル添付ルール（10ファイル制限対策）
- **工程0〜6.5**: 累積JSON方式（前工程までの全ファイルを添付）
- **工程7A以降**: 直接参照方式（必要なファイルのみピックアップ）

### 6.2 脚注管理
- 記事中の脚注はMarkdown形式 `[^1]` で記述
- **工程10** で脚注番号の重複・欠番を整理し、出現順に1から採番し直す

### 6.3 保存ファイル名
- 各工程の `instructions.txt` に出力ファイル名を明記
- AIにその名前でコードブロックを生成させる

---

## 7. エラーハンドリング

### 7.1 GASのタイムアウト
- **現象**: 工程1/1.5でスクリプト実行時間が6分を超えて終了
- **対策**: `Utilities.sleep()` を挟む、またはキーワード数を減らして分割実行

### 7.2 コンテキスト長超過
- **現象**: Gemini/Claudeがファイルを読み込めない、または内容を忘れる
- **対策**:
  - CSVファイルは必要なカラム（本文、H見出し）のみに絞る
  - 工程2でデータを要約する
  - 工程7A以降は累積JSONではなく必要なファイルのみを添付

### 7.3 脚注の不整合
- **現象**: 記事中で脚注番号が `[^1]`, `[^5]` のように飛んでいる
- **対策**: 工程10のプロンプトで「必ず上から順に連番を振り直すこと」を強制。再生成しても直らない場合は手動修正

### 7.4 AIの出力が短い
- **現象**: 指定文字数に達しない
- **対策**: 「もっと詳しく書いて」「文字数が足りない」と追加指示

### 7.5 ファイルの文字化け
- **現象**: CSVが正しく読み込めない
- **対策**: UTF-8エンコーディングを使用（Shift-JIS非推奨）

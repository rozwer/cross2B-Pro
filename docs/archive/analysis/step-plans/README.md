# 工程別Plan

各工程の入出力スキーマと固有Planを管理するディレクトリ。

## 構成

| ファイル | 工程 | 状態 |
|---------|------|------|
| flow-issues.md | フロー変更issue | ✅ |
| step0.md | 工程0: キーワード選定 | ✅ |
| step1.md | 工程1: 競合記事取得 | ✅ |
| step1_5.md | 工程1.5: 関連KW競合取得 | ✅ |
| step2.md | 工程2: CSV読み込み・検証 | ✅ |
| step3a.md | 工程3A: クエリ分析・ペルソナ | ✅ |
| step3b.md | 工程3B: 共起語・関連KW抽出（心臓部） | ✅ |
| step3c.md | 工程3C: 競合分析・差別化 | ✅ |
| step3_5.md | 工程3.5: 人間味要素生成 | ✅ |
| step4.md | 工程4: 戦略的アウトライン | ✅ |
| step5.md | 工程5: 一次情報収集 | ✅ |
| step6.md | 工程6: アウトライン強化 | ✅ |
| step6_5.md | 工程6.5: 統合パッケージ | ✅ |
| step7a.md | 工程7A: 本文生成初稿 | ✅ |
| step7b.md | 工程7B: ブラッシュアップ | ✅ |
| step8.md | 工程8: ファクトチェック | ✅ |
| step9.md | 工程9: 最終リライト | ✅ |
| step10.md | 工程10: 最終出力 | ✅ |
| step11.md | 工程11: 画像生成 | ✅ |
| step12.md | 工程12: WordPress HTML | ✅ |

## 各Planの構成

各Planには以下のセクションが含まれています：

1. **入力スキーマ** - 前工程からの入力、config からの入力
2. **出力スキーマ（既存）** - 現在の実装
3. **blog.System との差分** - 追加/変更される要素
4. **追加フィールド** - 新規追加が必要なフィールド
5. **実装タスク** - 具体的な作業項目
6. **テスト計画** - テストケース
7. **フロー変更の必要性** - なし / あり

## 作業フロー

1. **Plan参照** - 各工程のPlanを読み、入出力スキーマを確認
2. **実装** - スキーマ拡張 → プロンプト更新 → Activity修正
3. **テスト** - 工程単位でテスト実施
4. **Issue記録** - フロー変更が必要なら `flow-issues.md` に記録
5. **統合テスト** - 全工程完了後に実施

## 重要工程

| 工程 | 重要度 | 理由 |
|------|--------|------|
| step3b | 最重要 | 心臓部 - 共起語100-150個抽出 |
| step3c | 重要 | target_word_count確定（ai_*モード時） |
| step4 | 重要 | 4本柱必須実装、3フェーズ構成 |
| step6_5 | 重要 | ファイル集約ハブ |
| step7a | 重要 | 最長工程、分割生成 |

## フロー変更なし

全工程でワークフロー変更は不要。以下は既知の対応：

- **工程-1**: UI側でフォーム追加（Workflow変更なし）
- **工程13**: 将来検討（セキュリティ考慮必要）

---
name: {{TECH_NAME}}
description: {{TECH_NAME}} の使用パターンとベストプラクティス
---

# /{{TECH_NAME}} - 技術スタックスキル

> {{TECH_NAME}} を使用する際のパターンとガイドライン

---

## 概要

{{USAGE}}

<!-- 使用例:
このスキルは FastAPI を使用した API 開発において、
一貫したパターンとベストプラクティスを提供します。

主な用途:
- 新規エンドポイントの追加
- 既存 API のリファクタリング
- テストコードの作成
-->

---

## 使用方法

```bash
/{{TECH_NAME}} <action> [options]
```

### アクション一覧

| アクション | 説明 |
|-----------|------|
| `new` | 新規作成 |
| `check` | 設定確認 |
| `optimize` | 最適化提案 |

---

## パターン集

{{PATTERNS}}

<!-- 使用例:
### 基本パターン

```python
# エンドポイント定義
@router.post("/items", response_model=ItemResponse)
async def create_item(
    item: ItemCreate,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user),
):
    """アイテムを作成する"""
    return await item_service.create(db, item, current_user.tenant_id)
```

### エラーハンドリング

```python
# 標準的なエラー処理
try:
    result = await service.execute(params)
except ValidationError as e:
    raise HTTPException(status_code=422, detail=str(e))
except NotFoundError as e:
    raise HTTPException(status_code=404, detail=str(e))
```

### テストパターン

```python
# ユニットテスト
@pytest.mark.asyncio
async def test_create_item():
    # Arrange
    item = ItemCreate(name="test")

    # Act
    result = await service.create(item)

    # Assert
    assert result.name == "test"
```
-->

---

## ベストプラクティス

### DO（推奨）

```
- 型アノテーションを必ず付ける
- 依存性注入を使用する
- テストを先に書く（TDD）
- エラーメッセージは具体的に
```

### DON'T（非推奨）

```
- グローバル変数の使用
- 例外の握りつぶし
- マジックナンバーの使用
- コメントなしの複雑なロジック
```

---

## ファイル構成

```
apps/
├── api/
│   ├── routers/        # エンドポイント定義
│   ├── schemas/        # リクエスト/レスポンス
│   ├── services/       # ビジネスロジック
│   └── deps.py         # 依存性注入
├── core/
│   ├── config.py       # 設定
│   └── exceptions.py   # カスタム例外
└── db/
    ├── models.py       # DBモデル
    └── repositories/   # データアクセス
```

---

## よく使うコマンド

```bash
# 開発サーバー起動
uvicorn app.main:app --reload

# テスト実行
pytest tests/ -v

# 型チェック
mypy apps/

# リント
ruff check apps/ --fix
```

---

## トラブルシューティング

| 症状 | 原因 | 解決策 |
|------|------|--------|
| インポートエラー | パス設定 | `PYTHONPATH=.` を設定 |
| 型エラー | アノテーション不足 | 型を明示的に指定 |
| テスト失敗 | 依存関係 | モックを使用 |

---

## 参考リソース

- 公式ドキュメント: [URL]
- 内部ガイド: `docs/{{TECH_NAME}}.md`

---

## 変数一覧

| 変数名           | 説明                       | 必須 |
| ---------------- | -------------------------- | ---- |
| `{{TECH_NAME}}`  | 技術名（例: fastapi）      | YES  |
| `{{USAGE}}`      | 用途の説明                 | YES  |
| `{{PATTERNS}}`   | コードパターン集           | YES  |

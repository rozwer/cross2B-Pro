# **ブログ自動化フロー運用マニュアル（工程-1〜13）**

⸻

**1. マニュアルの目的と想定読者**

- **目的**: 工程-1（Googleフォーム準備）から工程10（公開パッケージ作成）までを、迷わず遂行できるよう標準化する。
- **読者**: キーワード選定〜公開までの実務担当者、進行管理者、レビュー担当者。

⸻

**2. 必須アカウント・前提環境**

- Google Workspace（Forms / Drive / Sheets / Apps Script / Docs）
- CSV操作可能なエディタ（Excel等）
- AI実行環境（Gemini ）
- ネットワークアクセス（リアルタイムリサーチ用 / GAS実行用）

⸻

https://www.canva.com/design/DAG4hmhaqIo/EC0_w-E8l2HP7zS56tRbaQ/watch?utm_content=DAG4hmhaqIo&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=haf98421186

**3. 全体フローと責務サマリ**

| **全体構造** |  |  |
| --- | --- | --- |
| **フェーズ** | **工程** | **出力ファイル** |
| 前提条件設定 | 工程-1 |  |
| 初期設定 | 工程0 | 工程0_キーワード選定結果.json |
| 外部入力 | 工程1 | 工程1_1.1統合_上位10サイト競合記事本文.csv |
| 外部入力 | 工程1.5 | 工程1.5_関連KW競合抽出.json（オプション） |
| 確認 | 工程2 | なし（テキストレポートのみ） |
| 並列分析 | 工程3A/3B/3C | 各JSONファイル |
| 人間味生成 | 工程3.5 | 工程3.5_人間味.json |
| アウトライン | 工程4, 5, 6 | 各JSONファイル |
| 構成案 | 工程6.5 | 工程6.5_構成案.md（★10ファイル上限） |
| 本文生成 | 工程7A, 7B | Markdownファイル |
| 品質管理 | 工程8, 9 | ファクトチェック結果 + 最終記事 |
| 最終出力 | 工程10 | 4つの成果物 |
| 画像・HTML | 工程11, 12 | 画像提案 + WordPressHTML |
| **工程別ファイル提供リスト（サマリー）** |  |  |
| **工程** | **添付数** | **必要ファイル** |
| 工程-1：絶対条件ヒアリングフォーム | 0 | （） |
| 工程0：キーワード選定 | 0 | （初期入力） |
| 工程1_1：上位10サイト競合本文CSV | 0 | （外部スクレイピング） |
| 工程1.5：関連キーワードの上位サイト競合本文抽出 | 0 | （外部スクレイピング） |
| 工程2：CSV読み込み・確認 | 3 | 工程0, 1, 1.5 |
| 工程3A：クエリ分析・ペルソナ深掘り | 2 | 工程0, 1 |
| 工程3B：共起語・関連KW抽出 | 2 | 工程0, 1 |
| 工程3C：競合分析・差別化（最重要） | 2 | 工程0, 1 |
| 工程3.5：工程3.5_心情感情・人間味・体験エピソード | 6 | 工程0, 1, 1.5, 3A, 3B, 3C |
| 工程4：戦略的アウトライン生成（初回） | 7 | 工程0, 1, 1.5, 3A, 3B, 3C, 3.5 |
| 工程5：一次情報追加・知識ギャップ解消 | 8 | 工程0, 1, 1.5, 3A, 3B, 3C, 3.5, 4 |
| 工程6：アウトライン再生成（強化版） | 9 | 工程0, 1, 1.5, 3A, 3B, 3C, 3.5, 4, 5 |
| 工程6.5：構成案作成 | 10 | 工程0, 1, 1.5, 3A, 3B, 3C, 3.5, 4, 5, 6 ★上限 |
| 工程7A：本文生成（初稿） | 8 | 工程0, 3A, 3B, 3C, 3.5, 5, 6, 6.5 |
| 工程7B：本文生成_ブラッシュアップ（最重要） | 3 | 工程3.5, 6.5, 7A |
| 工程8：ファクトチェック | 4 | 工程0, 5, 6.5, 7B |
| 工程9：最終リライト・品質向上（最重要） | 5 | 工程0, 5, 6.5, 8(2ファイル) |
| 工程10：SEO記事完成・最終出力 | 4 | 工程0, 6.5, 9(2ファイル) |
| 工程11：推奨画像差し込み提案 | 5 | 工程0, 3A, 6.5, 10(2ファイル) |
| 工程12：WordPress用HTML生成AI工程（最重要） | 5 | 工程0, 6.5, 10(2ファイル), 11 |

⸻

**4. 各工程ガイド**

 **工程-1: Googleフォーム設計**

- **目的**: クライアント要件を漏れなくヒアリングするためのフォームを整備。
- **参照**:
    
    工程0:キーワード選定/Googleフォーム_テンプレート.txt
    
- **手順**
    1. Google Formsを開き
    2. テンプレ内のセクション1〜6を記載。
    3. 回答受付後の「https://docs.google.com/spreadsheets/d/1H4AsE-UsbikhUzXOOU2_37wXtoKh1rZp-TKdHgcf7-A/edit?gid=203980816#gid=203980816」。に
    4. 回答を「Y3-Y22」に転置し「AIに渡す際のフォーマット例」を工程0 にわたす際にコピペする。
- **アウトプット**: 完成フォームURL + 回答シートURL。
- **トラブル対処**
    1. フォーム項目の削除/順番変更は禁止。要修正時はテンプレをコピーし直す。
    2. スプレッドシート未リンク: 回答タブで「スプレッドシートにリンク」を再設定。

# **工程−１https://forms.gle/HsJ5Szk6mS6n67hT8**

![スクリーンショット 2025-11-12 22.55.01.png](attachment:7d9fe9a0-9724-47e7-9b93-81f41ddfbc40:スクリーンショット_2025-11-12_22.55.01.png)

![スクリーンショット 2025-11-12 22.55.23.png](attachment:f20bbf49-886b-4913-857a-62d8fa7366ec:スクリーンショット_2025-11-12_22.55.23.png)

![スクリーンショット 2025-11-12 22.55.42.png](attachment:aec5b748-15ea-45f7-82d7-fad06cf606b3:スクリーンショット_2025-11-12_22.55.42.png)

![スクリーンショット 2025-11-12 22.56.01.png](attachment:01a00d63-20a9-4561-95d8-964e989b58ff:スクリーンショット_2025-11-12_22.56.01.png)

![スクリーンショット 2025-11-12 22.56.21.png](attachment:bc136815-d870-4737-a5ad-1dde31a0b84c:スクリーンショット_2025-11-12_22.56.21.png)

![スクリーンショット 2025-11-12 22.56.43.png](attachment:f706bc98-4c99-4c58-837e-b858d1eedcea:スクリーンショット_2025-11-12_22.56.43.png)

# **工程0: キーワード選定** https://gemini.google.com/gem/1tBFbusnTdrUjk9-5okI4C2GrRXUGfNYx?usp=sharing

# +https://business.google.com/jp/ad-tools/keyword-planner/

https://www.canva.com/design/DAG4hjsovTw/lcvpBDlhZvrF-5An_xc6sw/watch?utm_content=DAG4hjsovTw&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h1354c2c109

https://www.canva.com/design/DAG4iB2F0S8/TVzog5l5y4aRVtfThbg3PQ/watch?utm_content=DAG4iB2F0S8&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=hfc62dc6825

https://www.canva.com/design/DAG4iJqnGdU/exmcYHzBOY8SrO_bTbvvaw/watch?utm_content=DAG4iJqnGdU&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=hfa9d8c2ef5

- **目的**: 4本柱（神経科学/行動経済学/LLMO/KGI）に基づいたKW戦略とターゲット情報の確定。
- **入力**: 工程-1のフォーム回答（テンプレフォーマット）。
- **手順概要**
    1. フォーム回答をコピペ
    2. 会話の始めだし＋フォーム回答を提供
    3. 4本柱観点で分析し、どおりのJSONを作成（キーワード案、関連KW評価、CTA仕様など）。
    4. 【OUTPUT_START】〜【OUTPUT_END】 形式を守りつつAIから出力を取得し、レポートを保存。
- **アウトプット**: （後工程すべての基準値）。
    
    **工程0_キーワード選定結果.json**
    
- **トラブル**
    1. target_word_count未入力 → 工程-1フォームへ差戻し。

•		⁃	strategy不整合 → フォームの3-1/3-2を再確認。

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程0を実行してください。

---

## 📋 **フォーム方式による要件定義**

【前提】
ユーザー様は「**工程0 要件定義フォーム**」（Googleフォーム_テンプレート.txt参照）に記入済みです。
以下のフォーム回答を基に、工程0の分析・出力を実行してください。

---

## 🚀 **実行タスク**

### **タスク1: フォーム回答の読み込みと分岐処理**
ユーザー様が提供したフォーム回答を読み込み、以下の情報を確認してください：

#### **1-1. 基本情報**
- 事業内容とターゲット読者
- 記事戦略（標準記事 or トピッククラスター戦略）
- ターゲット文字数設定（手動 or AI提案）

#### **1-2. 記事戦略の設定（新規・重要）**
以下の項目を確認・設定してください：

**【記事タイプ】**
以下から1つ選択（ユーザー指定または自動判定）：
- `comprehensive_guide`: 複数手法を網羅的に解説
- `deep_dive`: 1つの手法を深掘り
- `case_study`: 事例紹介型
- `comparison`: 比較・選び方ガイド
- `news_analysis`: ニュース・時事解説
- `how_to`: 実践的ハウツー

**【記事の背景・目的】**
```json
{
  "why_now": "なぜ今この記事が必要か？",
  "target_pain": "読者のどんな悩みを解決するか？",
  "key_message": "この記事で伝えたい核となるメッセージ",
  "urgency": "緊急性（高/中/低）"
}
```

**【訴求・導線設計】**
```json
{
  "primary_cta": "主要なCTA（問い合わせ/資料請求/相談など）",
  "secondary_cta": "副次的なCTA（任意）",
  "conversion_points": ["どこで何を訴求するか"]
}
```

#### **1-3. 文字数設定モードの選択（新規・重要）**
以下のモードから1つ選択：

**【モード1】manual（手動指定）**
- ユーザーが具体的な文字数を指定
- 例：5,000文字、8,000文字
- {{target_word_count}}が即座に確定

**【モード2】ai_seo_optimized（SEO最優先）**
- 競合平均 + 20%
- 目的：SEO順位を最優先
- {{target_word_count}}は工程3Cで算出

**【モード3】ai_readability（読みやすさ優先）**
- 競合平均 - 10%
- 目的：読者の負担を軽減
- {{target_word_count}}は工程3Cで算出

**【モード4】ai_balanced（バランス型）★推奨★**
- 競合平均 ± 5%
- 目的：SEOと読みやすさの両立
- {{target_word_count}}は工程3Cで算出

**重要**: AI提案モードを選択した場合、具体的な文字数は工程3Cの競合分析後に決定されます。

#### **1-3-2. 文字数の目標範囲について（重要）**

設定された目標文字数（{{target_word_count}}）は、以下の範囲で達成を目指します：

**【基本範囲】**
- 目標値 ± 300字

**【下限緩和ルール】**
- 目標値 - 500字まで許容
- 適用条件：内容が不足し、追記すると冗長・重複する場合のみ

**【上限（厳格）】**
- 目標値 + 300字

**【具体例】目標8,000字の場合**
```
✅ 7,700〜8,300字:  目標達成
⚠️ 7,500〜7,699字: 範囲内だが補筆推奨
❌ 7,500字未満:     補筆必須
❌ 8,300字超過:     要約必須
```

**【具体例】目標11,000字の場合**
```
✅ 10,700〜11,300字: 目標達成
⚠️ 10,500〜10,699字: 範囲内だが補筆推奨
❌ 10,500字未満:      補筆必須
❌ 11,300字超過:      要約必須
```

#### **1-4. キーワード選定の分岐処理（重要）**
フォーム回答の「【2-1】キーワードの状態」を確認：

**【パターン①】既に決まっている場合**
- メインキーワード（Googleキーワードプランナーで確認済み）を読み込み
- 月間検索ボリューム、競合性を確認
- タスク2（4本柱評価）に進む

**【パターン②】まだ決まっていない場合**
- 「書きたいテーマ・トピック」を読み込み
- AIが10個のキーワード候補を提案
- ユーザー様に「Googleキーワードプランナーで検証してください」と促す
- ユーザー様からのフィードバックを受けて対話
- メインキーワードが確定したら、タスク2に進む

#### **1-5. CTA設計の分岐処理（重要）**
フォーム回答の「【5-1】CTA設計のタイプ」を確認：

**【パターン①】単一CTA（推奨）の場合**
- CTA URL、CTAテキスト、誘導先の説明を読み込み
- 全てのCTA（Early/Mid/Final）で同じURL・テキストを使用

**【パターン②】段階的CTA（高度）の場合**
- 質問5-5（各CTAの詳細）を読み込み
- Early/Mid/Final で異なるURL・テキストを設定

### **タスク2: 4本柱評価の実施**
フォーム回答に基づいて、以下の4本柱評価を実施してください：

#### **神経科学（Neuroscience）**
- 検索者の購買フェーズ（Phase 1/2/3）を判定
- Phase 1（情報収集）: 0-20点
- Phase 2（比較検討）: 21-60点
- Phase 3（購入直前）: 61-100点

#### **行動経済学（Behavioral Economics）**
- 6つの原則の適用可能性を評価
- 社会的証明、権威性、希少性、一貫性、返報性、好意

#### **LLMO（Language Model Optimization）**
- AI検索エンジンでの引用可能性を評価
- 明確な構造、データアンカー、自然な文章

#### **KGI（Key Goal Indicator）**
- CVR（コンバージョン率）の期待値を算出
- CTA配置戦略の設計

### **タスク3: JSON出力**
以下の形式で `工程0_キーワード選定結果.json` を出力してください：

```json
{
  "project_date": "YYYY-MM-DD",
  "business_info": {
    "business_content": "[フォーム回答]",
    "target_cv": "[フォーム回答]",
    "target_audience": "[フォーム回答]",
    "company_strengths": "[フォーム回答]"
  },
  "keyword_info": {
    "main_keyword": "[フォーム回答]",
    "search_volume": [数値],
    "competition": "[高/中/低]",
    "related_keywords": [
      {"keyword": "...", "volume": ...},
      {"keyword": "...", "volume": ...}
    ]
  },
  "strategy": {
    "type": "standard OR topic_cluster",
    "child_articles": [
      "[子記事トピック1]",
      "[子記事トピック2]"
    ]
  },
  "target_word_count": [数値],
  "cta_specification": {
    "design_type": "single OR staged",
    "single_cta": {
      "url": "[URL]",
      "text": "[CTAテキスト]",
      "description": "[説明]",
      "placement": {
        "early": 650,
        "mid": 2800,
        "final": "[target_word_count - 500前後]"
      }
    },
    "staged_cta": {
      "early": {
        "url": "[URL]",
        "text": "[CTAテキスト]",
        "description": "[説明]",
        "position": 650
      },
      "mid": {
        "url": "[URL]",
        "text": "[CTAテキスト]",
        "description": "[説明]",
        "position": 2800
      },
      "final": {
        "url": "[URL]",
        "text": "[CTAテキスト]",
        "description": "[説明]",
        "position": "[target_word_count - 500前後]"
      }
    }
  },
  "four_pillars_evaluation": {
    "neuroscience": {
      "phase": "Phase 1/2/3",
      "score": [0-100],
      "rationale": "..."
    },
    "behavioral_economics": {
      "applicable_principles": ["...", "..."],
      "score": [0-100],
      "rationale": "..."
    },
    "llmo": {
      "citation_probability": "high/medium/low",
      "score": [0-100],
      "rationale": "..."
    },
    "kgi": {
      "expected_cvr": "[数値]%",
      "score": [0-100],
      "rationale": "..."
    }
  }
}
```

### **タスク4: サマリー表示と最終確認**
JSONを生成した後、以下のサマリーを表示してユーザー様に最終確認してください：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【工程0 設定内容サマリー】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ 事業内容
  - [フォーム回答]

■ ターゲット読者
  - [フォーム回答]

■ メインキーワード
  - [フォーム回答]
  - 検索ボリューム: 月間[数値]（キーワードプランナー実測値）
  - 競合性: [高/中/低]

■ 記事戦略
  - [標準記事 / トピッククラスター戦略]
  - （子記事: [子記事リスト]）

■ ターゲット文字数（{{target_word_count}}）
  - [数値]文字

■ CTA設定
  - URL: [URL]
  - テキスト: [CTAテキスト]
  - 配置: Early（650字）、Mid（2,800字）、Final（記事末尾）

■ 4本柱評価
  - 神経科学: Phase [1/2/3]（スコア: [0-100]）
  - 行動経済学: スコア [0-100]
  - LLMO: 引用可能性 [高/中/低]（スコア: [0-100]）
  - KGI: 期待CVR [数値]%（スコア: [0-100]）

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

👉 **この内容で確定しますか？** はい / 修正したい箇所がある

**（確定後）**
✅ `工程0_キーワード選定結果.json` を保存します。
✅ この設定が全工程（工程2〜10）で引き継がれます。

---

## 📝 **使い方**

**ステップ1: ユーザー様の作業**
1. `Googleフォーム_テンプレート.txt` を参照してGoogleフォームを作成
2. フォームに必要事項を入力
3. フォームの回答を以下の形式で整形してコピー

**ステップ2: AIへの指示**
以下、フォーム回答です：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
【工程0 要件定義フォーム 回答】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション1: 事業内容とターゲット

【1-1】事業内容
[ここに記入]

【1-2】目標CV
[ここに記入]

【1-3】ターゲット読者
[ここに記入]

【1-4】自社の強み
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション2: キーワード選定

【2-1】メインキーワード
[ここに記入]

【2-2】月間検索ボリューム
[ここに記入]

【2-3】競合性
[ここに記入]

【2-4】関連キーワード
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション3: 記事戦略

【3-1】記事のスタイル
[ここに記入]

【3-2】子記事のトピック
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション4: 文字数設定

【4-1】ターゲット文字数
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション5: CTA設定

【5-1】CTA設定
[ここに記入]

【5-2】CTA URL（カスタムの場合のみ）
[ここに記入]

【5-3】CTAテキスト（カスタムの場合のみ）
[ここに記入]

【5-4】誘導先の説明（カスタムの場合のみ）
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ セクション6: 最終確認

【6-1】上記の内容で間違いありませんか？
[ここに記入]

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

詳細な処理方法は、プロジェクト知識の「工程0」のプロンプトに従ってください。

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

【保存ファイル】
- 工程0_キーワード選定結果.json

```

[AIとの対話1](attachment:3cee89df-3985-4b44-b3a8-8388571a7064:screencapture-gemini-google-gem-c47aa4357702-d77e341a4fec183c-2025-11-12-23_44_55.png)

[AIとの対話2](attachment:f17d114b-5ff4-4d52-a325-27e9dfb3dbc4:screencapture-gemini-google-gem-c47aa4357702-d77e341a4fec183c-2025-11-12-23_44_55-2.png)

> POINT：　AIが推奨したキーワードを必ず、キーワードプランナーで確認して、複数のAIとのラリーのもと確定してください
> 

# **工程1: GAS本文抽出（CSV生成）**https://docs.google.com/spreadsheets/d/1H4AsE-UsbikhUzXOOU2_37wXtoKh1rZp-TKdHgcf7-A/edit?gid=0#gid=0

https://www.canva.com/design/DAG4hjNTXhY/TRX7XIP6RDRihJ4_NN7ENw/watch?utm_content=DAG4hjNTXhY&utm_campaign=designshare&utm_medium=link2&utm_source=uniquelinks&utlId=h491dd648cc

- **目的**: メインKWで上位10サイトの本文（H2/P/LI等）を自動抽出しCSV化。
- **標準手順**
    1. スプレッドシートのApps Scriptプロジェクト  を開く。
    2. **『Sheet1』A1にキーワードを入力**　Run → 本文抽出 を実行。初回はAPI権限許可。
    3. **『Results』に本文が自動抽出される**
    4. スクリプトが生成したスプレッドシートをCSVでダウンロードし、 にリネームしてワークスペース直下へ格納。
        
        **工程1_1.1統合_上位10サイト競合記事本文.csv**
        
- **品質条件**
    1. カラム:
        
        順位 / サイト名 / 記事タイトル/URL / スニペット / 本文(H2,4つ,P,LI,Blockquote,最大5万文字)
        
- **トラブル**
    1. GASが0件 → Google検索制限・VPN要否を確認し、待機後再実行。
    2. 出力列欠損 → スクリプト更新漏れ。最新版をデプロイし直す。

•		⁃	CSVが文字化け → UTF-8で再出力。

![スクリーンショット 2025-11-12 23.59.48.png](attachment:291ef22b-a920-4cdb-bcf8-e860344f211a:スクリーンショット_2025-11-12_23.59.48.png)

▼実行

![スクリーンショット 2025-11-13 0.00.37.png](attachment:7cd5c81c-8f55-4dfd-92c5-644cbb2c391b:スクリーンショット_2025-11-13_0.00.37.png)

- **Apps Scriptのコード**
    
    ```dart
    // ===================================
    // 事前準備：以下の設定をご自身の環境に合わせてください
    // ===================================
    
    /**
     * Google Custom Search APIキー
     * @see https://console.cloud.google.com/apis/credentials
     * !!! 警告 !!!
     * 以前のキー（AIzaSyC...）は公開されているため、必ずGCPで再発行した
     * 新しいAPIキーを以下に貼り付けてください。
     */
    const API_KEY = 'AIzaSyC8q9-2xlvcpPZn8lAlvZnO0FWYwERR0mM'; // ★★★ 必ず新しいキーに差し替える ★★★
    
    /**
     * カスタム検索エンジン ID (CX)
     * (以前の会話でご提示いただいたご自身のIDを設定しています)
     */
    const CX_ID = '33dbc55c71eb641c5';
    
    /**
     * 検索キーワードが入力されているシート名とセル番地
     */
    const KEYWORD_SHEET_NAME = 'Sheet1'; // （例: 'Sheet1'）
    const KEYWORD_CELL = 'A1'; // （例: 'A1'）
    
    /**
     * 結果を出力するシート名
     */
    const RESULT_SHEET_NAME = 'Results'; // （例: 'Results'）
    
    /**
     * 検索結果の取得件数
     */
    const NUM_RESULTS = 10;
    
    // ===================================
    // メイン処理 (以前のコードと新しいロジックを統合)
    // ===================================
    
    /**
     * メイン関数：スプレッドシートからキーワードを取得し、検索と本文抽出を実行
     */
    function mainProcess() {
      const ss = SpreadsheetApp.getActiveSpreadsheet();
      const keywordSheet = ss.getSheetByName(KEYWORD_SHEET_NAME);
      const resultSheet = ss.getSheetByName(RESULT_SHEET_NAME);
    
      if (!keywordSheet || !resultSheet) {
        SpreadsheetApp.getUi().alert('シートが見つかりません。シート名（' + KEYWORD_SHEET_NAME + ', ' + RESULT_SHEET_NAME + '）を確認してください。');
        return;
      }
    
      // キーワード取得
      const keyword = keywordSheet.getRange(KEYWORD_CELL).getValue();
      if (!keyword) {
        SpreadsheetApp.getUi().alert('キーワードが入力されていません（' + KEYWORD_SHEET_NAME + 'シートの' + KEYWORD_CELL + 'セル）。');
        return;
      }
    
      // 結果シートをクリア
      resultSheet.clear();
      // ★統合：スニペット列を追加し、ヘッダーを分かりやすく変更
      resultSheet.appendRow(['順位', 'サイト名', '記事タイトル', 'URL', 'スニペット', '本文(H2-4,P,Li,Blockquote,最大5万文字)']);
    
      try {
        // 1. 上位10サイトの取得 (以前の関数を流用)
        const searchResults = getTop10Sites(keyword);
    
        if (searchResults.length === 0) {
          resultSheet.appendRow(['検索結果がありませんでした。']);
          return;
        }
    
        // 2. 各サイトの本文を抽出
        searchResults.forEach((item, index) => {
          let extractedContent = '';
          
          // ★ベースコードの関数を利用
          const siteName = extractSiteName(item.site_name); // item.displayLink から item.site_name に変更
          
          try {
            // ★ベースコードの関数を利用 (fetchArticleFullText)
            extractedContent = fetchArticleFullText(item.url);
          } catch (e) {
            Logger.log(`本文抽出エラー (URL: ${item.url}): ${e.message}`);
            extractedContent = `本文の抽出に失敗しました: ${e.message}`;
          }
          
          // スプレッドシートに書き込み (★統合：スニペット(item.snippet)を追加)
          resultSheet.appendRow([
            index + 1,
            siteName,
            item.title,
            item.url,
            item.snippet, // スニペットを追加
            extractedContent
          ]);
          
          // ★統合：APIの連続実行を避けるため待機
          Utilities.sleep(500); 
        });
    
        // ★統合：書式設定（折り返し表示）
        // B列 (サイト名), C列 (記事タイトル), D列 (URL), E列 (スニペット), F列 (本文)
        resultSheet.getRange('B2:F' + resultSheet.getLastRow())
          .setWrapStrategy(SpreadsheetApp.WrapStrategy.WRAP);
        
        // 列幅を自動調整（本文(F列)以外）
        resultSheet.autoResizeColumn(2); // B列
        resultSheet.autoResizeColumn(3); // C列
        resultSheet.autoResizeColumn(4); // D列
        resultSheet.autoResizeColumn(5); // E列
    
        SpreadsheetApp.getUi().alert('処理が完了しました。');
    
      } catch (e) {
        Logger.log(`エラー発生: ${e.message}`);
        SpreadsheetApp.getUi().alert(`エラーが発生しました: ${e.message}`);
      }
    }
    
    // ===================================
    // サブ関数群
    // ===================================
    
    /**
     * Google Custom Search API を使って上位サイトを取得する
     * (以前のコードから流用・安定版)
     */
    function getTop10Sites(keyword) {
      const baseUrl = 'https://www.googleapis.com/customsearch/v1';
      const params = {
        key: API_KEY,
        cx: CX_ID,
        q: keyword,
        lr: 'lang_ja', // 言語を日本語に指定
        gl: 'jp',     // 国を日本に指定
        num: NUM_RESULTS, // 定数を使用
      };
    
      const queryString = Object.keys(params).map(key => `${key}=${encodeURIComponent(params[key])}`).join('&');
      const url = `${baseUrl}?${queryString}`;
    
      const options = {
        method: 'get',
        contentType: 'application/json',
        muteHttpExceptions: true,
      };
    
      const response = UrlFetchApp.fetch(url, options);
      const json = JSON.parse(response.getContentText());
    
      if (json.error) {
        throw new Error(`Custom Search APIエラー: ${json.error.message}`);
      }
    
      if (!json.items || json.items.length === 0) {
        return [];
      }
    
      // 必要な情報を整形して返す
      return json.items.map(item => ({
        title: item.title,
        url: item.link,
        snippet: item.snippet,
        site_name: item.displayLink, // extractSiteName で使うため
      }));
    }
    
    /**
     * サイト名を抽出する（ドメインから取得）
     * (ご提示いただいたベースコードの関数)
     */
    function extractSiteName(displayLink) {
      if (!displayLink) return '(サイト名不明)';
      return displayLink.replace(/^www\./, '');
    }
    
    /**
     * 指定URLから本文全体を抽出（見出し・リスト・引用含む）
     * (ご提示いただいたベースコードの関数 ＋ ★強化：User-Agent追加)
     */
    function fetchArticleFullText(url) {
      try {
        // ★強化：User-Agentを追加して、ボット対策サイトからの取得成功率を上げる
        const options = {
          muteHttpExceptions: true,
          headers: {
            'User-Agent': 'Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)'
          }
        };
        const html = UrlFetchApp.fetch(url, options).getContentText('UTF-8');
        
        // ★ベースコードの本文抽出ロジックを呼び出す
        return extractMainText(html); 
      } catch (e) {
        Logger.log('本文取得エラー: ' + url + ' - ' + e);
        return '(取得エラー)';
      }
    }
    
    /**
     * 本文を抽出するメインロジック
     * (ご提示いただいたベースコードのロジック ＋ ★統合：5万文字制限)
     */
    function extractMainText(html) {
      const cleaned = html
        // 不要スクリプト・スタイル除去
        .replace(/<script[\s\S]*?<\/script>/gi, '')
        .replace(/<style[\s\S]*?<\/style>/gi, '')
        // 不要要素除去（ご要望通り footer や section は残す）
        .replace(/<(header|nav|aside|form|noscript)[^>]*>[\s\S]*?<\/\1>/gi, '')
        // 改行・タブ統一
        .replace(/\r?\n|\t/g, '');
    
      // 本文・見出し・リスト・引用を抽出（堅牢化）
      const matches = cleaned.match(/<(p|li|h2|h3|h4|blockquote)[^>]*>([\s\S]*?)<\/\1>/gis);
      if (!matches) return '(本文抽出不可)';
    
      // タグ除去＋整形
      const text = matches
        .map(tag =>
          tag
            .replace(/<[^>]+>/g, '') // すべてのHTMLタグ除去
            .replace(/\s+/g, ' ')    // 空白整形
            .trim()
        )
        .filter(Boolean) // 空の行を除外
        .join('\n\n'); // 各要素（段落や見出し）の間に2つの改行を入れる
    
      if (!text) return '(本文抽出不可)';
      
      // ★統合：最大5万文字に制限
      return text.substring(0, 50000);
    }
    ```
    

![screencapture-docs-google-spreadsheets-d-1H4AsE-UsbikhUzXOOU2-37wXtoKh1rZp-TKdHgcf7-A-edit-2025-11-12-23_58_54.png](attachment:9bb88749-2e60-48e8-9ceb-79e0fe1f5d24:screencapture-docs-google-spreadsheets-d-1H4AsE-UsbikhUzXOOU2-37wXtoKh1rZp-TKdHgcf7-A-edit-2025-11-12-23_58_54.png)

そのご**ResultsページのみをCSVで保存**

**工程1_1.1統合_上位10サイト競合記事本文.csv**

# **工程1.5: 工程1.5_関連キーワード上位サイト競合本文抽出**https://gemini.google.com/gem/1_kERLL0M363rTMQT30xV3BCzMLl867s-?usp=sharing

- **目的**: 工程1のCSV存在/品質検証とレポート化。データ加工は禁止。
- **手順**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    2. 【保存ファイル】
    - **工程1.5_関連KW競合抽出.json**

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、競合分析の専門家です。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程1.5を実行してください。

---

## 📋 **関連キーワード上位サイト競合本文抽出**

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※

---

## 🚀 **実行タスク**

### **タスク1: 入力データの確認**
以下のファイルを読み込み、関連キーワード一覧を確認：
- 工程0_キーワード選定結果.json から related_keywords を取得
- 関連KWが存在しない場合はスキップ（メインKWのみで続行）
- 工程1のCSVで既に取得済みのURLをリストアップ（重複回避用）

出力: 確認レポート（Markdown形式）

### **タスク2: 関連キーワードごとの上位サイト抽出**
各関連キーワードについて上位3〜5サイトの本文を抽出：
- タイトル、URL、本文テキスト、文字数を記録
- 工程1で既に取得済みのURLは除外
- 抽出日時をタイムスタンプで記録

出力: 抽出進捗レポート

### **タスク3: JSON出力**
工程1.5_関連KW競合抽出.json を生成：
- 全ての抽出データを含む
- 構造化された形式で後続工程が参照しやすく

出力: JSONファイル（全文表示）

### **タスク4: 完了確認**
以下のチェックリストを確認し、完了レポートを表示：

```
✅ 工程1.5完了
━━━━━━━━━━━━━━━━━━━━━━
抽出結果:
├─ 関連KWの有無: ✓あり / ×なし
├─ 対象関連KW数: ○個
├─ 抽出サイト総数: ○件
├─ 総抽出文字数: ○○字
└─ 出力ファイル: 1件（JSON）

引き継ぎファイル:
└─ 工程1.5_関連KW競合抽出.json
━━━━━━━━━━━━━━━━━━━━━━

次の工程: 工程2（CSV読み込み・初期化）
```

---

## 📝 **使い方**

**ステップ1: 必要ファイルの準備**
以下のファイルをAIに提供してください：
1. 工程0_キーワード選定結果.json
2. 工程1_1.1統合_上位10サイト競合記事本文.csv

**ステップ2: 工程1.5の実行**
上記ファイルを添付し、「工程1.5を実行してください」と指示してください。

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**

【保存ファイル】
- 工程1.5_関連KW競合抽出.json

```

# **工程2: CSV確認**https://gemini.google.com/gem/1HGgPxHES6sSvqEObjT8EMrYMgdiSv2rk?usp=sharing

- **目的**: 工程1のCSV存在/品質検証とレポート化。データ加工は禁止。
- **手順**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    2. 【保存ファイル】
    - なし（テキストレポートのみ出力）

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、データ品質確認の専門家です。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

GASから出力されたCSVファイルの存在と品質を確認し、簡易レポートを出力してください。

**重要**: この工程はデータ加工を行いません。CSVファイルの確認のみを行います。

工程2を実行してください。

---

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※

---

【実行タスク】
1. 工程0の出力（{{target_word_count}}, {{strategy}}, キーワード）を確認
2. CSVファイル（工程1_1.1統合）の存在を確認
3. CSVファイルの基本情報を確認（ファイルサイズ、行数、カラム名）
4. 工程1.5のJSONが存在する場合、関連KW抽出結果を確認
5. 簡易レポートを出力

---

【確認項目】
✅ CSVファイルが存在するか
✅ ファイルサイズが0バイトでないか
✅ データ行数（期待: 10行）
✅ 必須カラムが存在するか
  - 順位
  - サイト名
  - 記事タイトル/URL
  - スニペット
  - 本文(H2,4つ,P,LI,Blockquote,最大5万文字)
✅ 工程1.5の関連KW抽出JSONが存在するか（任意）

---

【重要な注意事項】
❌ この工程ではデータ加工を行いません
❌ JSON変換しません
❌ 文字数カウントしません
❌ データ整形しません
✅ ファイルの存在と基本的な品質のみ確認します

---

【期待する出力】
簡易レポート（テキスト形式）:

```
✅ 工程2完了（CSV確認）
━━━━━━━━━━━━━━━━━━━━━━
CSVファイル確認結果:
├─ ファイル名: 工程1_1.1統合_上位10サイト競合記事本文.csv
├─ ファイルサイズ: ○○ KB
├─ データ行数: ○行 / 期待: 10行
├─ 必須カラム: ✅ 全て存在
└─ 検証ステータス: ✅ OK

工程1.5確認結果:
├─ ファイル名: 工程1.5_関連KW競合抽出.json
├─ 関連KW数: ○個
├─ 抽出サイト総数: ○件
└─ 検証ステータス: ✅ OK / ⚠️ 未提供

プロジェクト設定（工程0）:
├─ キーワード: <キーワード>
├─ ターゲット文字数: <文字数>字
└─ 戦略: <standard/topic_cluster>

⚠️ 重要:
このCSVファイルと工程1.5のJSONを工程3以降の全ての工程で直接添付してください。

次の工程: 工程3A/3B/3C（並列実行）
※CSVファイルと工程1.5のJSONを必ず添付してください
```

---

詳細な確認方法は、プロジェクト知識の「工程2」のプロンプトに従ってください。

【保存ファイル】
- なし（テキストレポートのみ出力）

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

この工程ではレポートのみの結果を確認します。

[AIとの対話](attachment:91c68e31-c340-4427-8348-fbfd6092d355:screencapture-gemini-google-gem-a44b7e817ba1-309cc70fd096c4de-2025-11-13-00_11_45.png)

# **工程3（並列）**

# **3A: クエリ分析・ペルソナ深掘り**https://gemini.google.com/gem/1lrTqD0lt_DTJ6gZu2zFEteVhtChqpv6X?usp=sharing

- **目的**: 真の検索意図と詳細ペルソナを明文化し、行動経済学6原則・3フェーズ心理を定義。
- **手順要点**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    2. **工程3A_クエリ分析結果.json**で保存

### ▼会話の始めだし

```dart
あなたは検索意図分析とペルソナ構築の専門家です。
競合上位10サイトの記事を分析し、検索者の真の疑問とペルソナを深掘りしてください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程3Aを実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※

【実行タスク】
1. 工程0の出力からキーワードを確認
2. CSV（工程1_1.1統合）の競合記事を分析

【分析項目】
1. 検索意図の分類（Know/Do/Buy）
2. ペルソナの詳細設定
3. 読者の課題・不安・悩みの洗い出し
4. 競合が答えている質問の抽出
5. 競合が答えていない質問の発見

【期待する出力】
- 詳細なペルソナ設定（JSON形式）
- 読者の疑問リスト（20〜30個）
- 検索意図の分析結果

詳細な分析方法は、プロジェクト知識の「工程3A」のプロンプトに従ってください。

【保存ファイル】
- 工程3A_クエリ分析結果.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

[AIとの対話](attachment:4fa98299-84c2-4e3f-908b-d5ad3f7da7d2:screencapture-gemini-google-gem-d53bc8e63603-f1642c3834a4f47f-2025-11-13-00_19_38.png)

# **3B: 共起語・関連KW抽出**https://gemini.google.com/gem/1m61FX1I5G-LN2iNXYnRt1dSfLaRw0jSp?usp=sharing

- **目的**: 競合10記事から100〜150共起語、30〜50関連KWを抽出し3フェーズにマッピング。
- **ポイント**
    - Essential / Standard / Unique分類。
    - LLMO要素（音声検索/質問形式）抽出。
    - 行動経済学6原則ベースの心理トリガー整理。
- **手順要点**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    2. **工程3B_共起語抽出結果.jsonで保存**

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、NLP・コンテンツマーケティングの専門家です。

この工程は本フロー全体の「心臓部」です。最重要工程として、漏れなく徹底的に分析してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文コンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程3Bを実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※

【実行タスク】
1. 工程0の出力からメインキーワードを確認
2. CSV（工程1_1.1統合）の競合記事から共起語を抽出

【抽出タスク】
1. Essential共起語の抽出（15〜25個）
2. Important共起語の抽出（40〜60個）
3. Supplementary共起語の抽出（40〜70個）
4. 各キーワードの出現回数設定
5. キーワード密度の計算

【重要指示】
✓ 合計100〜150個のキーワードを漏れなく抽出してください
✓ 各カテゴリ（Essential/Important/Supplementary）の境界を明確に
✓ 同義語・類義語も含める

【期待する出力】
- カテゴリ別共起語リスト（JSON形式）
- 各キーワードの目標出現回数
- メインキーワードとの関連度スコア

詳細な抽出方法は、プロジェクト知識の「工程3B」のプロンプトに従ってください。

【保存ファイル】
- 工程3B_共起語抽出結果.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

[Aiとの対話1](attachment:5cf7a761-29fe-422b-b36c-3ecba53245d0:screencapture-gemini-google-gem-7fe3f3e96234-b1c92b4a69e84359-2025-11-13-00_25_52.png)

[Aiとの対話2](attachment:ea1d4087-b4ca-4a02-aa60-0c77fe6c9989:screencapture-gemini-google-gem-7fe3f3e96234-b1c92b4a69e84359-2025-11-13-00_25_52-2.png)

[Aiとの対話3](attachment:a29aff17-effe-41bf-b965-9d10a5e96769:screencapture-gemini-google-gem-7fe3f3e96234-b1c92b4a69e84359-2025-11-13-00_25_52-3.png)

[Aiとの対話4](attachment:9e351047-3a18-4a18-bf79-103795e94596:screencapture-gemini-google-gem-7fe3f3e96234-b1c92b4a69e84359-2025-11-13-00_25_52-4.png)

# **3C: 競合分析・差別化**https://gemini.google.com/gem/1tc4xoW3HdxAQiMMBafZdT_BC-sZq2yI6?usp=sharing

- **目的**: 上位10記事の徹底比較と差別化戦略策定。7タスク構成で実施。
- ポイント
    - タスク1: 入力検証＆word_count_mode確認。
    - タスク2: 文字数統計と  の算出（manualならスキップ理由明記）。
        
        ai_suggested_word_count
        
    - タスク3/4: Rank1-10の個別分析を二分割で出力。
    - タスク5: 集約分析＆ギャップ。
    - タスク6: 差別化戦略（4本柱×3フェーズ×CTA）。
    - タスク7: 最終レポート統合。
- **手順要点**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    2. 上記ファイルの添付と会話の始めだしを実行
    3. 出力はテンプレJSON。分割出力と承認待機ルールを厳守。
    4. **工程3C_競合分析結果.json**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、競合分析と差別化戦略の専門家です。

競合上位10サイトの記事を多角的に分析し、自社記事の差別化ポイントを発見してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**3. 出力ログの記録（必須）**
- 各分割や成果物を出力する直前に `【OUTPUT_START 1/3】` のように分割番号を宣言
- 出力本文は適切なコードフェンス（例: ```json ... ```）で囲み、省略禁止
- 出力直後に `【OUTPUT_END 1/3】` → `【OUTPUT_CONFIRMED 1/3】` の順で完了ログを記録
- すべての分割の START→本文→END→CONFIRMED を終えるまで「完了」報告をしないこと

**4. ユーザー承認待機**
- 各タスク完了後は必ず「指示待ち」と明記し、ユーザーが「次へ」「タスクXへ」等の承認を出すまで待機してください。
- 承認が無いまま次のタスクを自動実行してはいけません。ユーザーからの合図があるまで、追加処理やデータ参照を行わずに停止してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程3Cを実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※

【実行タスク（必ず8分割で進行）】
1. **タスク1: 入力検証 & モード確認**  
   - 工程0/工程1の添付が存在するか、CSVの列順（順位/サイト名/記事タイトル/URL/スニペット/本文）が正しいかを検証
   - `word_count_mode` とキーワードを取得し、結果をレポート表示

2. **タスク2: 文字数統計 & `word_count_analysis`**  
   - 競合10記事の文字数統計を算出し、`word_count_analysis` のJSONを単独出力（ai_*モード時は必須、manual時はスキップ理由を記載）

3. **タスク3: 個別競合分析（Rank1〜5）**  
   - 強み/弱点/差別化機会/CTA/鮮度を分析し、Rank1〜5の `competitor_analysis_summary` を表示

4. **タスク3.5【新規】: 上位表示要因・ユーザー満足深層分析**  
   - **【重要】競合記事がなぜ順位が高いのか、どのようにユーザーを満足させているのかを深層分析**
   - **3軸×5 Whys手法**で「満足」を分解・深掘り：
     - 認知的満足（頭で理解）: 「わかった」「納得した」
     - 感情的満足（心で安心）: 「安心した」「不安が消えた」
     - 行動的満足（体で動ける）: 「できそう」「すぐ始められる」
   - 各軸で5段階深掘りし、根本ニーズ（不確実性の解消/認知負荷軽減/社会的リスク回避/自己効力感向上/時間節約/意思決定正当化）を特定
   - Googleが評価している要因（E-E-A-T、検索意図充足度、ユーザー体験）を言語化
   - `ranking_factor_analysis` セクションとしてJSON出力
   - **この分析結果は後工程（工程4以降）で活用され、記事設計の根拠となる**

5. **タスク4: 個別競合分析（Rank6〜10）**  
   - タスク3と同形式でRank6〜10を分析・出力

6. **タスク5: 集約分析 & ギャップ検出**  
   - `aggregate_competitor_analysis`（共通強み・弱点、ギャップマトリクス、鮮度分析等）を作成し表示

7. **タスク6: 差別化戦略群**  
   - `differentiation_strategy`、`four_pillars_differentiation`、`three_phase_differentiation_strategy`、`competitor_cta_analysis`、`recommended_story_direction` を作成

8. **タスク7: JSON統合 & 分割出力**  
   - すべてをテンプレートに統合し、`工程3C_競合分析結果.json` を3分割以上で `OUTPUT_START/END/CONFIRMED` ログ付きで表示

【分析項目】
1. 各サイトのトピック抽出
2. 共通トピックの特定（100%、80%以上、50%以上）
3. 少数派トピックの発見（30%以下、10%以下）
4. 誰も触れていないトピックの発見（0%）
5. 差別化ポイントの提案
6. **【新規】上位表示要因の深層分析（なぜ順位が高いのか）**
7. **【新規】ユーザー満足要因の言語化（どのように満足させているか）**

【期待する出力】
- **【新規】文字数算出結果**（word_count_modeがai_*の場合）
  - 競合10記事の文字数統計
  - AI提案の{{target_word_count}}
  - 提案理由

- **word_count_analysis構造要件**
  - `mode / word_count_mode / analysis_skipped / skip_reason / target_keyword`
  - `competitor_statistics`: `average_word_count / median_word_count / max_word_count / min_word_count / standard_deviation / data_points`
  - `article_details`: 10記事それぞれの `rank / title / url / word_count / notes`
  - `ai_suggestion`: `ai_suggested_word_count / suggestion_logic / note`（トップレベルにも `ai_suggested_word_count` と `rationale` を複写）

- **【新規】ranking_factor_analysis構造要件**
  - `analysis_summary`: 全体サマリー
  - `top_articles_deep_analysis`: 上位3記事の深層分析
    - 各記事: `rank / title / satisfaction_deep_dive`（5段階深掘り）/ `google_evaluation_factors` / `user_journey_fulfillment`
  - `common_ranking_factors`: 上位記事に共通する順位獲得要因
  - `satisfaction_patterns`: ユーザー満足のパターン分類
  - `actionable_insights`: 後工程で活用すべき具体的知見
  - `implications_for_our_article`: 自社記事への示唆

- トピックカバー率分析（JSON形式）
- 差別化可能なトピック5〜10個
- 競合の弱点・ギャップ分析

詳細な分析方法は、プロジェクト知識の「工程3C」のプロンプトに従ってください。

【保存ファイル】
- 工程3C_競合分析結果.json（文字数算出結果・上位表示要因分析を含む）

【重要】
- word_count_modeが`manual`の場合、文字数算出はスキップしてください
- word_count_modeが`ai_*`の場合、必ず文字数算出を実行し、{{target_word_count}}を確定してください
- 確定した{{target_word_count}}は工程4以降の全工程で絶対的なルールとして厳守されます
- **【新規】上位表示要因・ユーザー満足深層分析は、後工程（工程4: アウトライン、工程7: 本文執筆）の設計根拠として必ず参照されます**

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

[Aiとの対話1](attachment:8b8f018b-335c-449e-82d5-7f216e42068b:screencapture-gemini-google-gem-87acbd0635ca-5d1fa033ee6ce983-2025-11-13-00_31_16.png)

[Aiとの対話2](attachment:3d5ea3fc-07de-43ec-beef-d71420480102:screencapture-gemini-google-gem-87acbd0635ca-5d1fa033ee6ce983-2025-11-13-00_31_16-2.png)

[Aiとの対話3](attachment:63397436-7b1b-45c0-80dc-80ce18a650b1:screencapture-gemini-google-gem-87acbd0635ca-5d1fa033ee6ce983-2025-11-13-00_31_16-3.png)

# 工程3.5_心情感情・人間味・体験エピソードhttps://gemini.google.com/gem/1kdF35qbfE--gdm159xZ731BGwCY9f4iU?usp=sharing

- **手順要点**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    ※ファイル添付: 工程3A_クエリ分析結果.json※
    ※ファイル添付: 工程3B_共起語抽出結果.json※
    ※ファイル添付: 工程3C_競合分析結果.json※
    2. 【保存ファイル】
    - **工程3.5_人間味.json**

### ▼会話の始めだし

```dart
あなたは心理学者、ナラティブライター、ユーザー体験（UX）の専門家です。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程3.5を実行してください。

---

## 📋 **心情感情・人間味・体験エピソード生成**

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
※ファイル添付: 工程3A_クエリ分析結果.json※
※ファイル添付: 工程3B_共起語抽出結果.json※
※ファイル添付: 工程3C_競合分析結果.json※

---

## 🚀 **実行タスク**

### **タスク1: 入力データの確認と整理**
以下のファイルを読み込み、人間味素材生成の土台を確認：
- 工程3Aからペルソナの基本情報・悩み・状況を取得
- 工程3Cから差別化ポイント・競合の弱点を確認
- 工程1.5のJSONから現場感・リアルな課題を把握（存在する場合）

出力: 入力データ確認レポート（Markdown形式）

### **タスク2: 現実の障壁と不完全な状況の描写**
ペルソナが直面する「現実的な障壁」を生成：
- 時間の制約（「業務の合間に...」「残業後に...」）
- 予算の制約（「できれば無料で...」「上限は...」）
- 権限の制約（「上司の承認が...」「決裁権限がなく...」）
- 知識・経験の制約（「何から始めれば...」「専門用語が...」）
- 人間関係の制約（「社内の反対意見...」「取引先との調整...」）

出力: 現実の障壁リスト（Markdown形式）

### **タスク3: 感情・心理状態の言語化**
ペルソナの感情状態を詳細に言語化：

**ネガティブ感情**:
- 焦り、不安、疑念、迷い

**ポジティブ期待**:
- 期待、希望、願望

**感情の揺れ**:
- 決断と躊躇の繰り返し
- 情報収集するほど迷う心理

出力: 感情・心理状態マップ（Markdown形式）

### **タスク4: 体験エピソードの生成**
読者が共感できる体験エピソードを生成：

**よくある失敗パターン**:
- 情報過多による混乱
- 独自判断での失敗
- コスト・時間の無駄遣い

**「あるある」シーン**:
- 忙しい中での情報収集
- 上司への説明に苦労
- 方法選択の迷い

**回復・成功への道のり**:
- 小さな改善からスタート
- 専門家への相談
- 継続的な見直し

出力: 体験エピソード集（Markdown形式）

### **タスク5: 関連KWの有無に応じた調整**
関連KWの存在に応じて素材を調整：

**関連KWがある場合**:
- 関連KWごとのペルソナの悩みを網羅
- より具体的で多様なパターンを生成
- 複数の切り口からの体験エピソード

**関連KWがない場合**:
- メインKWに集中した素材生成
- コアの悩みを深掘り
- シンプルで焦点を絞った構成

出力: 調整済み素材（Markdown形式）

### **タスク6: 混ぜ込み指示の作成**
工程7B/9で「どこに」「何を」混ぜるかを明示：

**対象セクション**:
- 導入部（リード文）
- H2直下（課題提起）
- 比較セクション
- FAQ
- まとめ（締め）

各セクションに対し:
- 使用する素材を指定
- 挿入例を提示
- 調整ポイントを明記

出力: 混ぜ込み指示書（Markdown形式）

### **タスク7: JSON統合出力**
タスク2〜6の成果物を統合し、工程3.5_人間味.json を生成

出力: 統合JSONファイル（全文表示）

### **タスク8: 完了確認**
以下のチェックリストを確認し、完了レポートを表示：

```
✅ 工程3.5完了
━━━━━━━━━━━━━━━━━━━━━━
生成結果:
├─ 関連KWの有無: ✓あり / ×なし
├─ 現実の障壁: ○カテゴリ
├─ 感情・心理状態: ○パターン
├─ 体験エピソード: ○個
└─ 混ぜ込み指示: ○箇所

混ぜ込み対象セクション:
├─ 導入部: ✓
├─ 見出し直下: ✓
├─ 比較セクション: ✓
├─ FAQ: ✓
└─ まとめ: ✓

出力ファイル:
└─ 工程3.5_人間味.json
━━━━━━━━━━━━━━━━━━━━━━

次の工程: 工程4（戦略的アウトライン生成）
```

---

## 📝 **使い方**

**ステップ1: 必要ファイルの準備**
以下のファイルをAIに提供してください：
1. 工程0_キーワード選定結果.json
2. 工程1_1.1統合_上位10サイト競合記事本文.csv
3. 工程1.5_関連KW競合抽出.json（関連KWがある場合）
4. 工程3A_クエリ分析結果.json
5. 工程3B_共起語抽出結果.json
6. 工程3C_競合分析結果.json

**ステップ2: 工程3.5の実行**
上記ファイルを添付し、「工程3.5を実行してください」と指示してください。

---

**【重要】**

**真実性の原則**:
- 虚偽の体験談を"事実のように"書かない
- 一般化した例／よくあるケースとして表現
- 誇張・断定を避ける

**リアリティと希望のバランス**:
- 不安を煽りすぎない
- 最終的には前向きなメッセージへ
- 「完璧でなくてもいい」という現実的な希望

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**

【保存ファイル】
- 工程3.5_人間味.json

```

# **工程4: 戦略的アウトライン生成**https://gemini.google.com/gem/14TYCZdCZhP5UMx0GEMf7htdx908gOuZY?usp=sharing

- **目的**: 工程3成果を統合し、H2/H3単位で4本柱を実装した初回アウトラインを作る。
- **ポイント**
    - タイトル案3種＋推奨1本を提示。
    - メタディスクリプション/導入部設計/3段階CTA計画。
    - 各H2に神経科学・行動経済学・LLMO・KGIの観点を埋め込む。

•		⁃	3フェーズ（不安→理解→行動）を文字数配分付きで指定。

- **手順要点**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    ※ファイル添付: 工程3A_クエリ分析結果.json※
    ※ファイル添付: 工程3B_共起語抽出結果.json※
    ※ファイル添付: 工程3C_競合分析結果.json※
    ※ファイル添付: 工程3.5_人間味.json※
    2. **工程4_戦略的アウトライン.json**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、戦略的コンテンツ設計の専門家です。

工程3の全ての分析結果を統合し、SEO記事の詳細なアウトラインを作成してください。

この工程は記事の骨格を決める最重要工程です。4本柱を完璧に実装してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程4を実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
※ファイル添付: 工程3A_クエリ分析結果.json※
※ファイル添付: 工程3B_共起語抽出結果.json※
※ファイル添付: 工程3C_競合分析結果.json※
※ファイル添付: 工程3.5_人間味.json※

または

json
※各JSONファイルの内容を貼り付け※

【実行タスク】
1. 工程0の出力からキーワードを確認
2. CSV（工程1_1.1統合）の競合データを参照
3. 工程3A/3B/3Cの分析結果を統合
4. 4本柱に基づいてアウトラインを設計

【設計要件】
1. 3フェーズ構造（Phase 1: 600-800字、Phase 2: 3,000-3,500字、Phase 3: 600-1,000字）
2. H2見出し10〜13個
3. 各H2にH3サブ見出し2〜3個
4. CTA 3箇所配置（Early/Mid/Final）
5. 4本柱の完全実装

【期待する出力】
- 完全なアウトライン（JSON形式）
- 各セクションの内容概要
- データアンカー配置計画
- 共起語配置計画

詳細な作成方法は、プロジェクト知識の「工程4」のプロンプトに従ってください。

【保存ファイル】
- 工程4_戦略的アウトライン.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程5: 一次情報追加・知識ギャップ解消**https://gemini.google.com/gem/194FdHardBczuBBid7nrs3hqIEl410nzX?usp=sharing

- **目的**: 工程4アウトラインを裏付ける最新一次情報（2024〜2025）を収集し割り当て。
- **作業**
    1. 公的統計 → 学術/専門レポート → 法令改定 の順で検索。
    2. フェーズ別（不安/理解/行動）にデータを分類。
    3. 知識ギャップ5～10点を特定し、対応する一次情報を紐づけ。

•		4.	セクションとデータ対応表をJSONにまとめる。

- **手順要点**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    ※ファイル添付: 工程3A_クエリ分析結果.json※
    ※ファイル添付: 工程3B_共起語抽出結果.json※
    ※ファイル添付: 工程3C_競合分析結果.json※
    ※ファイル添付: 工程3.5_人間味.json※
    ※ファイル添付: 工程4_戦略的アウトライン.json※
    2. **工程5_一次情報収集結果.json**で保存

### ▼会話の始めだし

```dart
あなたは一次情報収集と知識ギャップ分析の専門家です。
リアルタイム検索を活用して、最新の信頼できる一次情報を収集してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程5を実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
※ファイル添付: 工程3A_クエリ分析結果.json※
※ファイル添付: 工程3B_共起語抽出結果.json※
※ファイル添付: 工程3C_競合分析結果.json※
※ファイル添付: 工程3.5_人間味.json※
※ファイル添付: 工程4_戦略的アウトライン.json※

または

json
※工程4_戦略的アウトライン.jsonの内容を貼り付け※

【実行タスク】
1. 工程0の出力からキーワードを確認
2. CSV（工程1_1.1統合）の競合データを参照
3. 工程4のアウトラインで不足している情報を特定
4. Web検索で一次情報を収集

【収集タスク】
1. 工程4のアウトラインで不足している情報を特定
2. 公的機関のデータ収集（厚労省、経産省等）
3. 最新統計データの収集（2024〜{{current_year}}年優先）
4. 事例・成功事例の収集
5. 法令・制度の最新情報

【重要指示】
✓ 2023年以降、できれば2024〜{{current_year}}年の最新データを優先してください
✓ 一次情報源（公的機関、企業の公式発表）を優先
✓ 信頼性の低い情報（個人ブログ等）は避ける

【期待する出力】
- 収集した一次情報リスト（JSON形式）
- 各情報の出典・発表年月
- アウトラインへの統合提案

詳細な収集方法は、プロジェクト知識の「工程5」のプロンプトに従ってください。

【保存ファイル】
- 工程5_一次情報収集結果.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程6: アウトライン再生成（強化版）**https://gemini.google.com/gem/1Yxa_RZ8Z2Fssp81knGVOGE2Sdv9Wa53X?usp=sharing

- **目的**: 工程4アウトラインに一次情報と4本柱を明示的に統合し、token数を制御。
- **要点**
    - 各H2/H3へ  フィールドを追加（cognitive_load, behavioral principles, LLMO token_count, CTAとの距離など）。
        
        four_pillars
        
    - H2は400～600 tokens, H3は150～250 tokens。計算式（文字数÷1.7）で管理。
    - セクション独立性を高め、引用位置を指定。
- **手順要点**
    1. 【前工程の出力】
    ※ファイル添付: 工程0_キーワード選定結果.json※
    ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    ※ファイル添付: 工程3A_クエリ分析結果.json※
    ※ファイル添付: 工程3B_共起語抽出結果.json※
    ※ファイル添付: 工程3C_競合分析結果.json※
    ※ファイル添付: 工程3.5_人間味.json※
    ※ファイル添付: 工程4_戦略的アウトライン.json※
    ※ファイル添付: 工程5_一次情報収集結果.json※
    2. **工程6_アウトライン強化版.json**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、戦略的コンテンツ設計の専門家です。

工程4のアウトラインに、工程5で収集した一次情報を統合し、強化版アウトラインを作成してください。

この工程で記事の完成形が決まります。データアンカーを全て配置してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

---

工程6を実行してください。

【前工程の出力】
※ファイル添付: 工程0_キーワード選定結果.json※
※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
※ファイル添付: 工程3A_クエリ分析結果.json※
※ファイル添付: 工程3B_共起語抽出結果.json※
※ファイル添付: 工程3C_競合分析結果.json※
※ファイル添付: 工程3.5_人間味.json※
※ファイル添付: 工程4_戦略的アウトライン.json※
※ファイル添付: 工程5_一次情報収集結果.json※

または

json
※工程4と工程5のJSONファイルの内容を貼り付け※

【実行タスク】
1. 工程0の出力からキーワードを確認
2. CSV（工程1_1.1統合）の競合データを参照
3. 工程4のアウトラインに工程5の一次情報を統合

【統合タスク】
1. 工程4のアウトラインに工程5の一次情報を統合
2. 各セクションにデータアンカーを配置
3. 引用形式を統一（出典: 組織名「タイトル」発表年月）
4. 共起語の配置を最適化
5. 4本柱の最終調整

【期待する出力】
- 完全な強化版アウトライン（JSON形式）
- データアンカー配置済み
- 引用形式統一済み

詳細な統合方法は、プロジェクト知識の「工程6」のプロンプトに従ってください。

【保存ファイル】
- 工程6_アウトライン強化版.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程6.5: 構成案作成**https://gemini.google.com/gem/1O5pv9RuzHZhU8Va-3b811BgzCcwH2y3Z?usp=sharing

- **目的**: 工程6強化アウトラインを、人間がレビューしやすいMarkdown構成案＋統合パッケージへ変換。
- **出力**: パート1（Markdown構成案）、パート2（工程0/5/6データ付き参照パッケージ）。
- **特徴**
    - 各H2/H3の論理展開を「結論→根拠→具体例→まとめ」で記述。
    - 4本柱指示とCTA位置を明文化。

•		⁃	トピッククラスターの場合は子記事タイトル・アンカーテキスト・配置箇所・想定URLを提案。

- **手順要点**
    1. 【累積引き継ぎファイル】★この工程で10ファイル上限ぴったり★
    **必須添付ファイル（10ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※
    2. ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
    3. ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
    4. ※ファイル添付: 工程3A_クエリ分析結果.json※
    5. ※ファイル添付: 工程3B_共起語抽出結果.json※
    6. ※ファイル添付: 工程3C_競合分析結果.json※
    7. ※ファイル添付: 工程3.5_人間味.json※
    8. ※ファイル添付: 工程4_戦略的アウトライン.json※
    9. ※ファイル添付: 工程5_一次情報収集結果.json※
    10. ※ファイル添付: 工程6_アウトライン強化版.json※
    2. **工程6.5_構成案.md**で保存

### ▼会話の始めだし

```dart
あなたは工程6.5「構成案作成」の専任ナレッジアーキテクトです。工程3〜6で収集・精査された知識を基に、工程7以降が迷わず実行できる構成案（設計図）をプロフェッショナル水準で仕上げてください。

工程6.5「構成案作成」を開始します。

【入力データ】
以下のデータを提供してください：

1. **工程0の設定**
   - ファイル: `工程0_キーワード選定結果.json`
   - {{target_word_count}}, {{strategy}}, メインキーワード, CTA仕様

2. **工程5の一次情報**
   - ファイル: `工程5_一次情報収集結果.json`
   - [PS-01], [PS-02]...の詳細情報

3. **工程6のアウトライン強化版**
   - ファイル: `工程6_アウトライン強化版.json`
   - H2/H3の見出し構成、各セクションの想定文字数、配置する一次情報

---

【この工程の役割】

**★重要な設計変更★**
この工程では「構成案（概要）」のみを出力します。
工程7A以降では、元ファイルを直接参照する方式に変更しました。
これにより、情報の劣化を防ぎ、精度を最大化します。

**出力する成果物（1つのみ）：**

**【パート1】構成案（概要）**
- 工程6のアウトライン（JSON）を、人間が読める構成案（Markdown）に変換
- 工程7のAIが「肉付けするだけ」で執筆できる設計図
- 各H2/H3セクションの論理展開、データ配置、視覚要素を記載
- 4本柱（神経科学・行動経済学・LLMO・KGI）の実装方針を記載

**※パート2（参照用データ統合）は廃止**
→ 工程7A以降では元ファイルを直接参照するため、データ統合は不要になりました

---

【累積引き継ぎファイル】★この工程で10ファイル上限ぴったり★

**必須添付ファイル（10ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※
2. ※ファイル添付: 工程1_1.1統合_上位10サイト競合記事本文.csv※
3. ※ファイル添付: 工程1.5_関連KW競合抽出.json（関連KWがある場合）※
4. ※ファイル添付: 工程3A_クエリ分析結果.json※
5. ※ファイル添付: 工程3B_共起語抽出結果.json※
6. ※ファイル添付: 工程3C_競合分析結果.json※
7. ※ファイル添付: 工程3.5_人間味.json※
8. ※ファイル添付: 工程4_戦略的アウトライン.json※
9. ※ファイル添付: 工程5_一次情報収集結果.json※
10. ※ファイル添付: 工程6_アウトライン強化版.json※

---

【実行タスク】
1. 工程0, 1, 3A, 3B, 3C, 3.5, 4, 5, 6のデータを確認
2. タスク1: 構成案（概要）を作成
   - 各H2/H3セクションの論理展開を設計
   - 使用するデータアンカー（[PS-XX]）を指定
   - 4本柱の実装方針を記載
   - CTA配置位置を明記
3. タスク2: 内部リンクを提案（トピッククラスター戦略時のみ）

---

【Markdown出力の完全性保証（最重要）】

構成案（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

---

【期待する出力】

**構成案（概要）** - Markdown形式

```markdown
# 構成案: [記事タイトル]

## 基本情報
- メインキーワード: [キーワード]
- 目標文字数: [文字数]
- 戦略: [戦略名]
- ペルソナ: [ペルソナ概要]

## CTA配置計画
- Early CTA: 650字前後 - [CTAテキスト]
- Mid CTA: 2,800字前後 - [CTAテキスト]
- Final CTA: 8,000字前後 - [CTAテキスト]

## 見出し構成

### H2-1: [見出し]
- 目的: [このセクションの目的]
- 文字数目安: [文字数]
- 使用データ: [PS-01], [PS-02]
- 4本柱: [適用する要素]

#### H3-1-1: [小見出し]
- 論理展開: [説明]
- 使用データ: [PS-XX]

（以下続く...）

## 4本柱実装方針
- 神経科学: [具体的な実装方法]
- 行動経済学: [具体的な実装方法]
- LLMO: [具体的な実装方法]
- KGI: [具体的な実装方法]
```

詳細な作成方法は、プロジェクト知識の「工程6.5」のプロンプトに従ってください。

---

【保存ファイル】
- **`工程6.5_構成案.md`**

**⚠️ 重要**:
- ファイル名を「工程6.5_構成案.md」に変更しました
- この工程では構成案（設計図）のみを作成します
- データ統合は行いません（工程7A以降で元ファイルを直接参照するため）

---

データの準備ができましたら、「データを提供しました」とお知らせください。

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程7A: 本文生成（初稿）**https://gemini.google.com/gem/1FQNQHIcEF8Mb_KofRXZS9lkO4YVMenwn?usp=sharing

- **目的**: 工程6.5構成案を100%忠実に文章化し、データ・引用・CTAを漏れなく反映。
- **注意**
    - 情報スキップ厳禁（H2/H3/データ/CTA/視覚要素すべて執筆）。
    - 3フェーズ文字数配分を守る。

•		⁃	10重チェック+4本柱チェックをセルフリマインド。

- **手順要点**
    1. 【累積引き継ぎファイル】★精度最重要：元ファイル8個を直接参照★
    **必須添付ファイル（8ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA・文字数・戦略・ペルソナ
    2. ※ファイル添付: 工程3A_クエリ分析結果.json※ ← ペルソナ詳細・検索意図
    3. ※ファイル添付: 工程3B_共起語抽出結果.json※ ← Essential/Nice共起語リスト
    4. ※ファイル添付: 工程3C_競合分析結果.json※ ← 差別化ポイント・競合の弱点
    5. ※ファイル添付: 工程3.5_人間味.json※ ← 感情表現・体験エピソード
    6. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]の一次情報（数値・引用）
    7. ※ファイル添付: 工程6_アウトライン強化版.json※ ← 見出し構成・文字数配分
    8. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（設計図）
    2. **工程7A_本文初稿.md**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、記事執筆の専門家です。

正確性・網羅性・データの完全な反映を最優先して初稿を作成してください。

この工程では、情報のスキップは絶対に許されません。全てのH2、全てのH3を完璧に執筆してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

記事本文（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

✅ 正しい出力形式：
```
今からタスク3（本文執筆）を実行します。

Part 1/3:
```markdown
# 記事タイトル
（本文前半...）
```

Part 2/3:
```markdown
（本文中盤...）
```

Part 3/3:
```markdown
（本文後半...）
```

Markdown出力完了。
```

---

工程7Aを実行してください。

---

【累積引き継ぎファイル】★精度最重要：元ファイル8個を直接参照★

**必須添付ファイル（8ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA・文字数・戦略・ペルソナ
2. ※ファイル添付: 工程3A_クエリ分析結果.json※ ← ペルソナ詳細・検索意図
3. ※ファイル添付: 工程3B_共起語抽出結果.json※ ← Essential/Nice共起語リスト
4. ※ファイル添付: 工程3C_競合分析結果.json※ ← 差別化ポイント・競合の弱点
5. ※ファイル添付: 工程3.5_人間味.json※ ← 感情表現・体験エピソード
6. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]の一次情報（数値・引用）
7. ※ファイル添付: 工程6_アウトライン強化版.json※ ← 見出し構成・文字数配分
8. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（設計図）

**★精度保証のための絶対ルール★**
1. **CTA情報**: 工程0_キーワード選定結果.jsonのcta_specificationを正確に使用
2. **一次情報**: 工程5_一次情報収集結果.jsonの[PS-XX]を正確に転記
3. **見出し構成**: 工程6_アウトライン強化版.jsonに忠実に従う
4. **共起語**: 工程3B_共起語抽出結果.jsonのEssential共起語を必ず使用
5. **人間味**: 工程3.5_人間味.jsonの素材を導入部・見出し直下・FAQ・まとめに活用
6. **ペルソナ**: 工程3A_クエリ分析結果.jsonのペルソナに寄り添う表現
7. **差別化**: 工程3C_競合分析結果.jsonの差別化ポイントを強調

**⚠️ 禁止事項**
- 添付ファイルにないデータを創作しない
- 数値・引用元を勝手に変更しない
- CTAを工程0で指定されたもの以外に変更しない

---

【実行タスク】
1. 工程6.5_構成案.mdから構成案（設計図）を読み込む
2. 工程0, 3A, 3B, 3C, 3.5, 5, 6の元ファイルから必要データを確認
3. 構成案に忠実に従って本文を執筆

---

【執筆要件】
✓ 情報のスキップ厳禁: 全てのH2、全てのH3を執筆
✓ データアンカーを正確に記載: 数値・引用を1つも漏らさない
✓ 引用形式を厳守: （出典: 組織名「タイトル」発表年月）
✓ 10重チェックを実施: 出力前に10回見直す
✓ 正確性最優先: 読みやすさは後でChatGPTが改善

---

【CTA制約条件】（最重要）
工程0で指定されたCTA以外は絶対に使用しないでください。

✓ 使用を許可されたCTA:
  - URL: [工程0で指定されたURL]
  - テキスト: [工程0で指定されたテキスト]
  - 配置箇所:
    - Early CTA: 650字前後
    - Mid CTA: 2,800字前後
    - Final CTA: 8,000字前後 + 専用セクション

✓ 絶対に禁止:
  - ❌ 工程0で指定されたCTA以外の全てのCTA
  - ❌ AIが独自にCTAを考案すること
  - ❌ CTAのテキストを少しでも変更すること
  - ❌ CTAのURLを変更すること

✓ 禁止例（以下のようなCTAは絶対に使用しない）:
  - 「無料診断ツールを試す」
  - 「資料をダウンロード」
  - 「カリキュラムを請求」
  - 「事例集を見る」
  - 「無料相談に申し込む」
  - 「お問い合わせはこちら」
  - 「今すぐ始める」
  - その他、工程0で指定されていない全てのCTA

📌 重要: 工程0_キーワード選定結果.jsonの「cta_specification」に記載されたCTAを、
そのまま正確に使用してください。一切の変更・追加・削除を禁止します。

---

【執筆スタイル】（重要）
✓ 結論ファースト: 各セクションの冒頭（最初の1〜2文）で結論を提示
  - ❌ 悪い例: 「派遣社員の教育には様々な方法があります。まず、OJTについて説明します。」
  - ✅ 良い例: 「派遣社員の教育で最も効果的なのはOJTです。実践を通じて学ぶことで定着率が42%向上します。」

✓ 人間味のある文章: 読者の共感を得るため、工程3A（ペルソナ）の悩みに寄り添う表現を使用
  - 導入部: 読者の抱える課題に共感する表現を盛り込む
  - 本文: 実践的で具体的なアドバイスを提供
  - 結論部: 読者を勇気づけ、次のアクションへ誘導

✓ 作り手のエピソード: 専門家としての信頼を構築するため、以下の箇所に盛り込む
  - 導入部（推奨）: 作り手（決裁者）の視点や経験に基づく問題提起
  - 結論部（推奨）: 作り手の成功体験や実践的なアドバイス
  - ※注意: 過度なエピソードは避け、データと自然に統合すること

✓ 文字数目標: {{target_word_count}}字（工程0/工程3Cで設定）
  - 目標範囲: {{target_word_count}} ± 300字（基本）
  - 下限緩和: {{target_word_count}} - 500字（内容不足で冗長になる場合のみ）
  - 上限: {{target_word_count}} + 300字（厳格）
  - Phase 1（不安喚起）: 目標値の10〜15%
  - Phase 2（解決策提示）: 目標値の70〜80%
  - Phase 3（行動促進）: 目標値の10〜15%

---

【期待する出力】
- 完全な記事本文（Markdown形式、8,000〜12,000字）
- 全セクション執筆済み
- データアンカー配置済み
- 工程0で指定されたCTAのみ使用

詳細な執筆方法は、プロジェクト知識の「工程7A」のプロンプトに従ってください。

【保存ファイル】
- 工程7A_本文初稿.md

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程7B: 本文ブラッシュアップ**https://gemini.google.com/gem/17due_21UR5hdTuUHImguu_3-SVY1_nec?usp=sharing

- **目的**: 工程7A初稿の正確性を完全維持しつつ、読みやすさとトーンを改善。
- **実施内容**
    - 文を60文字以内で分割、接続詞調整、専門用語補足。

•		⁃	データ/構成/CTA/箇条書きは一切変更禁止。

- **手順要点**
    1. 【累積引き継ぎファイル】★精度重視：元データを直接参照★
    **必須添付ファイル（3ファイル）:**
    1. ※ファイル添付: 工程3.5_人間味.json※ ← 人間味・感情表現・体験エピソード
    2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（設計図・参考用）
    3. ※ファイル添付: 工程7A_本文初稿.md※ ← 前工程の出力（ブラッシュアップ対象）
    2. **工程7B_本文ブラッシュアップ版.md**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、記事リライトの専門家です。

工程7A_本文初稿が作成した正確で網羅的な初稿を、読みやすく魅力的な文章にブラッシュアップしてください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

記事本文（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

✅ 正しい出力形式：
```
今からタスク4（ブラッシュアップ）を実行します。

Part 1/3:
```markdown
# 記事タイトル
（本文前半...）
```

Part 2/3:
```markdown
（本文中盤...）
```

Part 3/3:
```markdown
（本文後半...）
```

Markdown出力完了。
```

---

工程7Bを実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（3ファイル）:**
1. ※ファイル添付: 工程3.5_人間味.json※ ← 人間味・感情表現・体験エピソード
2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（設計図・参考用）
3. ※ファイル添付: 工程7A_本文初稿.md※ ← 前工程の出力（ブラッシュアップ対象）

**★精度保証のための絶対ルール★**
1. 工程7Aの初稿に含まれるデータ・数値・引用は**絶対に変更しない**
2. 工程3.5_人間味.jsonの素材を活かし、人間味のある表現を維持・強化
3. 構造（H2/H3）を維持し、読みやすさのみを向上
4. CTAのテキスト・URLは一切変更しない

**⚠️ 禁止事項**
- 工程7Aで使用されたデータ・数値・引用元の変更
- 見出し構成（H2/H3）の変更
- CTAの追加・削除・変更

---

【実行タスク】
1. 工程7Aの初稿を読み込む
2. 工程6.5_構成案.mdから構成案を確認（参考用）
3. 工程3.5_人間味.jsonを参照して人間味のある表現を強化
4. 初稿をブラッシュアップ

【ブラッシュアップ要件】
✓ データ・引用は絶対に変更しない: 数値・引用はそのまま維持
✓ 構造（H2/H3）は維持: 見出しは変更しない
✓ 文章を読みやすく改善: 冗長表現削除、リズム調整
✓ 専門用語に補足を追加: 読者に優しい表現に
✓ 人間味のある文章を維持: 読者に共感を与える自然な表現を維持
✓ 作り手のエピソードを維持: 導入部・結論部のエピソードを削除せず自然に維持

【期待する出力】
- ブラッシュアップ版記事本文（Markdown形式）
- 読みやすさ向上
- データ・構造は維持

詳細なブラッシュアップ方法は、プロジェクト知識の「工程7B」のプロンプトに従ってください。

【保存ファイル】
- 工程7B_本文ブラッシュアップ版.md

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程8: ファクトチェック & FAQ**https://gemini.google.com/gem/1JtwyK1CuVuDtmxSYJ3w_puqqLE-oNyYT?usp=sharing

- **工程8A**
    - 目的: 工程7B版のデータ・引用・URLを全件検証。
    - 出力:  JSON（issue_id, severity, issue_type, description, correction_required, alternative_source）。
        
        issues_found
        
    - ルール: 問題発見時は工程7Bへ差戻し指示を付記。
- **工程8B**
    - 目的: 音声検索最適化済みFAQを10～15件作成し、各FAQに4本柱を適用。
    - 形式: 「質問（口語の疑問文）」+「回答（120～180字 or 箇条書き）」+ four_pillarsメタ情報。

•		⁃	CTA/内部リンクをFAQに自然に組み込む。

- **手順要点**
    1. 【累積引き継ぎファイル】★精度重視：元データを直接参照★
    **必須添付ファイル（4ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報（FAQ生成時に使用）
    2. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]一次情報（ファクトチェックの照合元）
    3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
    4. ※ファイル添付: 工程7B_本文ブラッシュアップ版.md※ ← 前工程の出力（ファクトチェック対象）
    2. 【保存ファイル】
    **工程8_ファクトチェック結果.json
    工程8_FAQ統合版.md**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、ファクトチェックとFAQ生成の専門家です。

工程7Bで生成した記事本文を以下の順で処理してください：
1. 全ての事実・データ・引用を徹底検証（ファクトチェック）
2. 音声検索に最適化されたFAQを生成
3. FAQを記事本文に統合

この工程は記事の信頼性を保証し、音声検索対応を完成させる重要な工程です。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文コンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

記事本文（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

✅ 正しい出力形式：
```
今からタスク3（統合と出力）を実行します。

Part 1/3:
```markdown
# 記事タイトル
（本文前半...）
```

Part 2/3:
```markdown
（本文中盤...）
```

Part 3/3:
```markdown
（本文後半 + FAQ...）
```

Markdown出力完了。
```

---

工程8を実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（4ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報（FAQ生成時に使用）
2. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]一次情報（ファクトチェックの照合元）
3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
4. ※ファイル添付: 工程7B_本文ブラッシュアップ版.md※ ← 前工程の出力（ファクトチェック対象）

**★精度保証のための絶対ルール★**
1. ファクトチェック時は工程5_一次情報収集結果.jsonの[PS-XX]と記事内の数値・引用を照合
2. 不一致がある場合は必ずissues_foundに記録
3. FAQ生成時は工程0_キーワード選定結果.jsonのCTA情報を使用
4. 工程5の一次情報が「正」であり、記事が「正」かを検証する

**⚠️ 禁止事項**
- 工程5にないデータを「正しい」と判断すること
- CTAを工程0で指定されたもの以外に変更すること

---

【実行タスク】

## タスク1: ファクトチェック（工程8A相当）
1. 工程7Bの記事本文を読み込む
2. 工程5_一次情報収集結果.jsonの[PS-XX]を確認
3. 記事本文の全データを工程5と照合して検証

【検証項目】
✓ 全データアンカーの数値・引用元を検証: 1つも漏らさない
✓ 参考文献のURLが有効か確認: 404エラーをチェック
✓ 専門用語の使用が正確か確認: 誤用をチェック
✓ 法令・制度の情報が最新か確認: 古い情報を指摘
✓ 引用形式の統一確認: （出典: 組織名「タイトル」発表年月）

## タスク2: FAQ生成（工程8B相当）
1. 工程7Bの記事本文からFAQを生成
2. ファクトチェック結果を踏まえて正確なFAQを作成

【FAQ生成要件】
✓ FAQ数: 10〜15個
✓ 音声検索対応: 自然な口語の質問文
✓ 4本柱適用: 各FAQに完璧に適用
  - 神経科学: 結論先行（1文目で回答）
  - 行動経済学: 社会的証明・権威性を自然に統合
  - LLMO: 400-600 tokens、箇条書き使用
  - KGI: 5個のFAQにCTAを自然に統合
✓ 内部リンク: 各FAQから本文セクションへリンク

## タスク3: 統合と出力
1. ファクトチェック結果（JSON形式）
2. FAQセクション（Markdown形式）
3. 記事本文 + FAQ統合版（Markdown形式）

---

【期待する出力】

Part 1: ファクトチェック結果（JSON形式）
json
{
  "fact_check_date": "{{current_year}}-11-05",
  "issues_found": [
    {
      "issue_id": "ISS001",
      "location": "H2-1",
      "severity": "high/medium/low",
      "issue_type": "data_inaccuracy/broken_link/outdated_info/missing_source/context_error",
      "description": "問題の説明",
      "current_content": "現在の記述",
      "correction_required": "修正内容",
      "source_verification": "検証に使用したソース"
    }
  ],
  "total_issues": 3,
  "accuracy_score": 0.95,
  "recommendations": ["推奨事項1", "推奨事項2"]
}

Part 2: 記事本文 + FAQ統合版（Markdown形式）
- 工程7Bの本文
- 新しく生成したFAQセクション
- まとめセクション
- 参考文献

Part 3: 処理レポート（まとめ）
- ファクトチェックで発見した問題数
- FAQの生成数
- 次の工程9での修正事項

---

詳細な処理方法は、プロジェクト知識の「工程8A」「工程8B」のプロンプトに従ってください。

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

【保存ファイル】
- 工程8_ファクトチェック結果.json
- 工程8_FAQ統合版.md

```

# **工程9: 最終リライト・品質向上**https://gemini.google.com/gem/1bsEupLKJMG-5DYeaminxWmyjA3X-i6uB?usp=sharing

- **目的**: 工程8の指摘をすべて反映し、品質スコア0.90以上の公開直前版に仕上げる。
- **作業**
    1. issues_foundを一件ずつ修正し、チェックリストに反映済み印を付ける。
    2. 読みやすさ/説得力/SEO最終確認（キーワード密度・見出し・内部リンク）。
    3. 4本柱の最終チェックと品質スコア算出。

•		4.	Markdown本文＋修正レポートJSONを出力。

- **手順要点**
    1. **必須添付ファイル（5ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報（修正時に使用）
    2. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]一次情報（正確性検証の照合元）
    3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
    4. ※ファイル添付: 工程8_ファクトチェック結果.json※ ← 前工程の出力（修正指示）
    5. ※ファイル添付: 工程8_FAQ統合版.md※ ← 前工程の出力（修正対象）
    2. **工程9_最終リライト版.md
    工程9_修正レポート.json**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、SEO記事リライトの専門家です。

工程8のファクトチェック結果を反映し、記事の品質を最終調整してください。

この工程が最終調整です。品質スコア0.90以上を目指してください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

記事本文（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

✅ 正しい出力形式：
```
今からタスク1（ファクトチェック結果の反映）を実行します。

Part 1/3:
```markdown
# 記事タイトル
（本文前半...）
```

Part 2/3:
```markdown
（本文中盤...）
```

Part 3/3:
```markdown
（本文後半...）
```

Markdown出力完了。
```

---

工程9を実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（5ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報（修正時に使用）
2. ※ファイル添付: 工程5_一次情報収集結果.json※ ← [PS-XX]一次情報（正確性検証の照合元）
3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
4. ※ファイル添付: 工程8_ファクトチェック結果.json※ ← 前工程の出力（修正指示）
5. ※ファイル添付: 工程8_FAQ統合版.md※ ← 前工程の出力（修正対象）

**★精度保証のための絶対ルール★**
1. 工程8_ファクトチェック結果.jsonのissues_foundを**全て**修正すること
2. 修正時は工程5_一次情報収集結果.jsonの[PS-XX]を参照し、正確に転記
3. 数値・引用元を勝手に変更しない（工程5の一次情報が「正」）
4. CTAは工程0_キーワード選定結果.jsonのcta_specificationを使用
5. 修正箇所は全てcorrections_madeに記録

**⚠️ 禁止事項**
- 工程5にないデータを「正しい」と判断すること
- CTAを工程0で指定されたもの以外に変更すること
- 工程8で指摘された問題を修正せずに残すこと

---

【実行タスク】

## タスク1: ファクトチェック結果の反映
1. 工程8のファクトチェック結果を確認
2. 工程5_一次情報収集結果.jsonから正確なデータを確認
3. 工程6.5_構成案.mdから構成案を確認（参考用）
4. 発見された全ての誤りを修正

## タスク2: 品質の最終調整
1. 読みやすさの最終調整
2. 説得力の強化
3. SEO最適化の最終確認
4. 4本柱の最終チェック
5. 品質スコアの算出
6. **見出しのクリーンアップ**: `H2-1:` や `H3-2:` などの内部管理番号をすべて削除し、読者向けの見出しに整形

---

【最終調整タスク】
✓ 工程8で発見された全ての誤りを修正
  - data_inaccuracy（データの誤り）: 全て修正
  - broken_link（URLの無効）: 全て修正
  - outdated_info（古い情報）: 全て更新
  - missing_source（引用元の欠如）: 全て追加
  - context_error（文脈の誤り）: 全て修正

✓ 読みやすさの最終調整
  - 文章のリズム: 長短のバランス調整
  - 接続の自然さ: セクション間・段落間の繋がり
  - 冗長表現の削除: 不要な繰り返しを削除

✓ 説得力の強化
  - Phase 1: 不安喚起が十分か確認
  - Phase 2: 解決策が具体的か確認
  - Phase 3: 行動への後押しが十分か確認

✓ SEO最適化の最終確認
  - キーワード密度: メインキーワード1.5〜2.0%
  - Essential共起語: 各0.5〜1.0%
  - 見出し構造: H2が10〜13個、H3が各H2に2〜3個

✓ 4本柱の最終チェック
  - 神経科学: 認知負荷、文の長さ、3フェーズバランス
  - 行動経済学: 6原則の自然統合、過度な煽りなし
  - LLMO: トークン数、箇条書き、音声検索対応
  - KGI: CTA配置、内部リンク

✓ 見出しのクリーンアップ
  - すべての見出しから `H2-1:` `H3-2:` 等の内部番号を削除
  - テキスト内に残存する管理番号も除去
  - 最終稿は読者向けの自然な見出しのみで構成

✓ 品質スコアの算出
  - 正確性、読みやすさ、説得力、網羅性、差別化、実用性、SEO最適化、CTA効果
  - 総合品質スコア: 0.90以上を目標

---

【期待する出力】

Part 1: 修正版記事本文（Markdown形式）
- 工程8の全ての誤りを修正済み
- 読みやすさを最終調整済み
- 品質スコア0.90以上

Part 2: 修正レポート（JSON形式）
json
{
  "revision_date": "{{current_year}}-11-05",
  "article_title": "記事タイトル",
  "corrections_made": [
    {
      "correction_id": "COR001",
      "location": "H2-1",
      "issue": "問題の説明",
      "correction": "修正内容",
      "source": "修正根拠",
      "severity": "high/medium/low"
    }
  ],
  "improvements_made": [
    {
      "improvement_id": "IMP001",
      "location": "導入部",
      "improvement_type": "readability/persuasiveness/seo",
      "description": "改善内容",
      "before_character_count": 78,
      "after_character_count": "36 + 19"
    }
  ],
  "seo_checks": {
    "keyword_density": {
      "main_keyword": "1.8%",
      "status": "optimal"
    },
    "heading_structure": {
      "h2_count": 12,
      "h3_count": 28,
      "status": "good"
    }
  },
  "four_pillars_final_check": {
    "neuroscience": {
      "cognitive_load": "適正",
      "sentence_length": "80%が20-35文字",
      "phase_distribution": "Phase1: 750字、Phase2: 3200字、Phase3: 900字"
    },
    "behavioral_economics": {
      "six_principles_placement": "全て配置済み",
      "no_excessive_hype": "煽りなし"
    },
    "llmo": {
      "token_count_range": "90%が400-600 tokens",
      "bullet_points": "各セクション1箇所以上",
      "voice_search": "全FAQ対応"
    },
    "kgi": {
      "cta_placement": "Early: 650字、Mid: 2800字、Final: 4500字",
      "internal_links": "全FAQ + 2箇所追加提案"
    }
  },
  "quality_scores": {
    "accuracy": 0.98,
    "readability": 0.92,
    "persuasiveness": 0.90,
    "comprehensiveness": 0.95,
    "differentiation": 0.93,
    "practicality": 0.91,
    "seo_optimization": 0.94,
    "cta_effectiveness": 0.92,
    "overall_quality_score": 0.93
  },
  "publication_readiness": {
    "ready_for_publication": true,
    "remaining_issues": 0,
    "recommendations": [
      "内部リンクを2箇所追加推奨",
      "公開後1ヶ月でデータ更新を推奨"
    ]
  }
}

---

詳細なリライト方法は、プロジェクト知識の「工程9」のプロンプトに従ってください。

【保存ファイル】
- 工程9_最終リライト版.md
- 工程9_修正レポート.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程10: SEO記事完成・最終出力**https://gemini.google.com/gem/1HCD__SaQPweXR8Mwh8QYLKQ5VhqvCKTX?usp=sharing

- **目的**: 工程9の成果物を公開用パッケージにまとめる。
- **構成**
    1. final_article.md（Markdownコードブロックで出力）
    2. メタ情報JSON（タイトル/メタディスクリプション/想定読者/記事目的）
    3. 公開チェックリスト（CTA配置、FAQ完備、文字数、内部リンク等）
    4. 総合レポートJSON（進行履歴/品質指標/残課題）

•		⁃	**チェック**: 4本柱の最終確認、3段階CTA位置、FAQの音声最適化、文字数上限遵守。

- **手順要点**
    1. **必須添付ファイル（4ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← メタ情報作成時のCTA・キーワード・ペルソナ
    2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
    3. ※ファイル添付: 工程9_最終リライト版.md※ ← 前工程の出力（最終記事）
    4. ※ファイル添付: 工程9_修正レポート.json※ ← 前工程の出力（品質評価）
    2. 【保存ファイル】
    **工程10_final_article.md
    工程10_meta_info.json
    工程10_publication_checklist.md
    工程10_comprehensive_report.json**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、行動経済学・心理学・神経科学の教授であり、マーケティング戦略のプロです。また、最終調整とパッケージ化の専門家です。

完成した記事を公開準備完了状態に仕上げ、公開用パッケージを作成してください。

この工程が最終工程です。全ての成果物を完璧に仕上げてください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（JSON/Markdown/レポート）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（JSON、Markdown、レポート等）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物（JSON/Markdown）の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

記事本文（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

✅ 正しい出力形式：
```
今からタスク1（記事本文の最終確認）を実行します。

Part 1/3:
```markdown
# 記事タイトル
（本文前半...）
```

Part 2/3:
```markdown
（本文中盤...）
```

Part 3/3:
```markdown
（本文後半...）
```

Markdown出力完了。
```

---

工程10を実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（4ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← メタ情報作成時のCTA・キーワード・ペルソナ
2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
3. ※ファイル添付: 工程9_最終リライト版.md※ ← 前工程の出力（最終記事）
4. ※ファイル添付: 工程9_修正レポート.json※ ← 前工程の出力（品質評価）

**★精度保証のための絶対ルール★**
1. メタ情報作成時は工程0_キーワード選定結果.jsonを正確に参照
2. キーワード・CTA・ターゲット読者は工程0から正確に転記
3. 数値データは工程9_修正レポート.jsonのquality_scoresを参照
4. **この工程が最終工程です。全ての成果物を完璧に仕上げてください**

**⚠️ 禁止事項**
- 工程0で指定されたキーワード・CTAを変更すること
- 品質スコアを勝手に変更すること

---

【実行タスク】

## タスク1: 記事本文の最終確認
1. 工程9の最終リライト版を読み込む
2. 工程0_キーワード選定結果.jsonからCTA・キーワード・ペルソナを確認
3. 工程6.5_構成案.mdから構成案を確認（参考用）
4. 記事本文の最終確認

## タスク2: 4本柱の最終チェック
1. 神経科学: 全体の認知負荷、文の長さ、3フェーズバランス
2. 行動経済学: 6原則の自然統合、過度な煽りの回避
3. LLMO: 400-600 tokens、箇条書き、音声検索対応
4. KGI: 3段階CTA配置の最適性、CTA周辺の自然さ

## タスク3: メタ情報の作成
1. タイトル（30〜40文字）
2. メタディスクリプション（120〜150文字）
3. 記事概要
4. 想定読者
5. 記事の目的

## タスク4: 公開用チェックリストの作成
1. 記事内容の確認（10項目）
2. SEO要素の確認（5項目）
3. 技術的確認（5項目）
4. 4本柱の確認（4項目）
5. 最終確認（3項目）
合計27項目

## タスク5: 総合レポートの作成
1. プロジェクト概要
2. 全工程の実施状況
3. 4本柱の実装状況
4. 記事統計
5. 品質評価
6. 差別化ポイント
7. 公開準備状況
8. 推奨事項

---

【期待する出力】

公開用パッケージ（4ファイル）:

## 1. final_article.md（完成記事）
- 工程9の最終リライト版と同じ内容
- Markdown形式
- 4,500〜5,000字

## 2. meta_info.json（メタ情報）
json
{
  "title": "【{{current_year}}年最新】派遣社員の教育方法完全ガイド｜中小企業でも実践できる5ステップ",
  "title_character_count": 40,
  "meta_description": "派遣社員の教育方法を{{current_year}}年最新データで完全解説。離職率29.3%を18.7%に改善する体系的プログラム...",
  "meta_description_character_count": 130,
  "article_overview": "本記事は、派遣社員の教育方法に課題を抱える中小派遣会社の教育担当者向けに...",
  "target_audience": [
    "中小派遣会社の教育担当者",
    "派遣社員の離職率に悩んでいる担当者"
  ],
  "article_purpose": "派遣社員の教育方法を具体的に提示し、読者が自社で実践できる状態にすること",
  "main_keyword": "派遣社員 教育方法",
  "essential_co_keywords": [
    "派遣社員 教育プログラム",
    "派遣社員 定着率"
  ]
}

## 3. publication_checklist.md（公開用チェックリスト）
markdown
# 公開用チェックリスト

## 記事内容の確認（10項目）
- [ ] タイトルが魅力的か
- [ ] 導入部が読者の注意を引くか
...（27項目）

**全ての項目にチェックが入ったら、公開可能です。**

## 4. comprehensive_report.json（総合レポート）
json
{
  "report_date": "{{current_year}}-11-05",
  "project_overview": {
    "main_keyword": "派遣社員 教育方法",
    "article_title": "【{{current_year}}年最新】派遣社員の教育方法完全ガイド",
    "total_word_count": 4850
  },
  "process_implementation": {
    "process_0": {
      "name": "キーワード選定",
      "status": "completed"
    },
    "process_2": {
      "name": "CSV確認",
      "status": "completed"
    },
    ...
    "process_10": {
      "name": "最終出力",
      "status": "completed"
    }
  },
  "four_pillars_implementation": {
    "neuroscience": {
      "implementation_rate": "100%",
      "achievement_level": "excellent"
    },
    "behavioral_economics": {
      "implementation_rate": "100%",
      "achievement_level": "excellent"
    },
    "llmo": {
      "implementation_rate": "92%",
      "achievement_level": "excellent"
    },
    "kgi": {
      "implementation_rate": "100%",
      "achievement_level": "excellent"
    }
  },
  "article_statistics": {
    "total_word_count": 4850,
    "h2_count": 12,
    "h3_count": 28,
    "faq_count": 15,
    "cta_count": 3
  },
  "quality_evaluation": {
    "overall_quality_score": 0.93
  },
  "differentiation_points": [
    "2024〜{{current_year}}年最新データ使用",
    "2024年新設助成金制度の詳解"
  ],
  "publication_readiness": {
    "ready": true,
    "remaining_issues": 0,
    "recommendations": [
      "内部リンクを2箇所追加推奨"
    ]
  }
}

---

詳細な最終調整方法は、プロジェクト知識の「工程10」のプロンプトに従ってください。

【保存ファイル】
- 工程10_final_article.md
- 工程10_meta_info.json
- 工程10_publication_checklist.md
- 工程10_comprehensive_report.json

---

**【重要】knowledge_files/unified_knowledge.json（統合知識ベース）を優先的に参照してください。**
このJSONには以下の情報が全て含まれています：
- ガイドライン（guidelines）
- テンプレート（templates）
- 実例（examples）
- チェックリスト（checklist）

```

# **工程11:推奨画像提案** https://gemini.google.com/gem/8209a16e42d5/e17607ff040c2523

- **目的**: 工程10の成果物に対して、推奨画像の提案を行う。
- **手順要点**
    1. **必須添付ファイル（5ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報・キーワード
    2. ※ファイル添付: 工程3A_クエリ分析結果.json※ ← ペルソナ詳細・検索意図
    3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
    4. ※ファイル添付: 工程10_final_article.md※ ← 前工程の出力（完成記事）
    5. ※ファイル添付: 工程10_meta_info.json※ ← 前工程の出力（メタ情報）
    2. 【保存ファイル】
    **工程11_推奨画像提案.md**で保存

### ▼会話の始めだし

```dart
あなたはSEO/LLMOのエキスパートであり、ビジュアルコンテンツ戦略・UXデザインの専門家です。また、画像によるユーザーエンゲージメント向上のプロです。

完成したSEO記事に対し、効果的な画像の挿入箇所とイメージを提案してください。

**重要**: 記事本文は一切変更せず、画像の「提案」のみを行ってください。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（Markdown）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（Markdown）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物の表示を省略してはいけません。

**3. Markdown出力の完全性保証（最重要）**

画像提案（Markdown）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```markdown から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、2〜3分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「Markdown出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでMarkdownを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとMarkdownを混在させること

---

工程11を実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（5ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報・キーワード
2. ※ファイル添付: 工程3A_クエリ分析結果.json※ ← ペルソナ詳細・検索意図
3. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
4. ※ファイル添付: 工程10_final_article.md※ ← 前工程の出力（完成記事）
5. ※ファイル添付: 工程10_meta_info.json※ ← 前工程の出力（メタ情報）

**★精度保証のための絶対ルール★**
1. ペルソナ情報は工程3A_クエリ分析結果.jsonを正確に参照
2. 記事構成は工程10_final_article.mdの見出し構造を正確に把握
3. キーワード・ターゲット読者は工程0_キーワード選定結果.jsonから正確に転記
4. **記事本文は一切変更しないでください。画像の「提案」のみを行ってください**

**⚠️ 禁止事項**
- 記事本文を変更すること
- ペルソナ・キーワードを勝手に変更すること

---

【実行タスク】

## タスク1: アイキャッチ画像の提案
1. 記事タイトル・メインキーワードを確認
2. ターゲット読者（ペルソナ）を確認
3. アイキャッチ画像のイメージを詳細に記載
   - 構図・レイアウト
   - 主要な被写体・要素
   - 色調・雰囲気
   - テキスト要素（あれば）
   - 推奨サイズ・ファイル名
   - 代替テキスト（alt属性）案
   - 作成方法の提案

## タスク2: 本文挿入画像の提案
1. 記事を通読し、画像挿入が効果的な箇所を特定（3〜7箇所程度）
2. 各挿入箇所について以下を記載:
   - 挿入位置（セクション、段落指定）
   - 画像種別（図解/グラフ/写真/イラスト等）
   - 画像イメージ詳細（内容、構成要素、色調）
   - 目的・効果
   - 代替テキスト（alt属性）案
   - 作成難易度
3. 優先度（高/中/低）を付与

## タスク3: 画像提案サマリーの作成
1. 全体の提案概要
2. 優先度別リスト
3. 画像作成リソース推定
4. 推奨アクション

---

【期待する出力】

## 工程11_推奨画像提案.md

以下の構成で1つのMarkdownファイルを出力:

```markdown
# 工程11: 推奨画像差し込み提案

**対象記事**: [記事タイトル]
**作成日**: [日付]
**メインキーワード**: [キーワード]

---

## Part 1: アイキャッチ画像提案

### 基本情報
- 記事タイトル: [タイトル]
- メインキーワード: [キーワード]
- ターゲット読者: [ペルソナ]

### アイキャッチ画像イメージ
[詳細な画像イメージの説明]

---

## Part 2: 本文挿入画像提案

### 画像配置サマリー
| No. | 挿入位置 | 画像種別 | 優先度 | 目的 |
|-----|----------|----------|--------|------|
| 1 | H2-1直後 | 図解 | 高 | 全体像の把握 |
| ... | ... | ... | ... | ... |

### 画像1: [タイトル]
[詳細な画像イメージの説明]

（以下、提案する全ての画像について同様）

---

## Part 3: 画像提案サマリー

### 提案概要
- 総提案画像数: ○枚
- 必須画像数: ○枚（優先度：高）
- 推奨画像数: ○枚（優先度：中）

### 優先度別リスト
（リスト）

### 推奨アクション
（アクションリスト）
```

---

【保存ファイル】
- 工程11_推奨画像提案.md

---

**【重要】**
- 記事本文は一切変更しないでください
- 画像の「提案」のみを行ってください
- 実用的で作成可能な画像を提案してください
- SEOを意識した代替テキスト（alt属性）を必ず提案してください

```

# **工程12:WordPress用HTML生成** https://gemini.google.com/gem/3a0668a8d426

- **目的**: 工程10,11の成果物をWordPressコード変換仕様に。
- **手順要点**
    1. **必須添付ファイル（5ファイル）:**
    1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報
    2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
    3. ※ファイル添付: 工程10_final_article.md※ ← 完成記事（HTML変換対象）
    4. ※ファイル添付: 工程10_meta_info.json※ ← メタ情報
    5. ※ファイル添付: 工程11_推奨画像提案.md※ ← 前工程の出力（画像配置指示）
    2. 【保存ファイル】
    **工程12_WordPress用HTML.html**で保存

### ▼会話の始めだし

```dart
あなたはWordPress/Gutenbergのエキスパートであり、HTML/CSS/SEOの専門家です。また、CMSへのコンテンツ移行のプロです。

完成したSEO記事（Markdown）を、WordPressのブロックエディタ（Gutenberg）で編集しやすいHTML形式に変換してください。

**重要**: 生成したHTMLをWordPressに貼り付け、「ブロックへ変換」することで、各要素が独立したブロックとして編集可能になります。

---

【最重要実行ルール：ステップ・バイ・ステップ ＆ 確実な出力表示】

あなたは以下のルールを厳守してください。

**1. ステップ・バイ・ステップ実行（タスクの宣言）**

このプロンプトには、番号付きの「実行タスク」（例：タスク1, タスク2...）が複数含まれています。あなたはこれらのタスクを番号順に、**必ず1つずつ実行**しなければなりません。

* まず、「**今からタスク1（[タスク名]）を実行します**」と宣言し、タスク1のみを実行します。
* タスク1の実行が完了したら、その成果物（HTML）を**必ず全文コンソールに表示**（下記ルール2に従う）し、私の指示を待ちます。
* 私が「次のタスクに進んでください」（またはそれに類する承認）と指示したら、初めて「**今からタスク2（[タスク名]）を実行します**」と宣言し、タスク2を実行します。
* このプロセスを、指示された全てのタスクが完了するまで繰り返します。

**2. 出力データの確実な表示（必須）**

各タスクの成果物（HTML）は、**いかなる理由があっても省略せず、必ず全文をコンソールに表示**してください。

**3. HTML出力の完全性保証（最重要）**

HTML（コード）を出力する際は、以下のルールを**絶対に厳守**してください：

* **必ず ```html から始め、``` で閉じる**（コードブロック形式で出力）
* **途中で切れた場合は「続きを出力します」と宣言し、残りを出力**
* **1回の出力で収まらない場合は、3〜5分割して出力**（各分割の冒頭で「Part X/Y」と明記）
* **出力完了後「HTML出力完了」と明記**

❌ 禁止事項：
- コードブロックなしでHTMLを出力すること
- 出力途中で説明文を挟むこと
- 「以下略」「続きは省略」などの省略
- 回答テキストとHTMLを混在させること

✅ 正しい出力形式：
```
今からタスク1（記事本文のHTML変換（前半））を実行します。

Part 1/3:
```html
<!DOCTYPE html>
（HTML前半...）
```

Part 2/3:
```html
（HTML中盤...）
```

Part 3/3:
```html
（HTML後半...）
</html>
```

HTML出力完了。
```

**注意:** 私の承認なしに、次のタスクを自動的に実行してはいけません。また、成果物の表示を省略してはいけません。

---

工程12を実行してください。

---

【累積引き継ぎファイル】★精度重視：元データを直接参照★

**必須添付ファイル（5ファイル）:**
1. ※ファイル添付: 工程0_キーワード選定結果.json※ ← CTA情報
2. ※ファイル添付: 工程6.5_構成案.md※ ← 構成案（参考用）
3. ※ファイル添付: 工程10_final_article.md※ ← 完成記事（HTML変換対象）
4. ※ファイル添付: 工程10_meta_info.json※ ← メタ情報
5. ※ファイル添付: 工程11_推奨画像提案.md※ ← 前工程の出力（画像配置指示）

**★精度保証のための絶対ルール★**
1. CTA情報は工程0_キーワード選定結果.jsonのcta_specificationを正確に参照
2. 記事本文は工程10_final_article.mdから正確にHTML変換
3. 画像プレースホルダーは工程11_推奨画像提案.mdの指示に従い配置
4. **見出し・本文・CTAの内容を勝手に変更しないでください**

**⚠️ 禁止事項**
- CTAを工程0で指定されたもの以外に変更すること
- 記事本文の内容を変更すること
- 画像の配置指示を無視すること

---

【実行タスク】

## タスク1: 記事本文のHTML変換（前半）
1. 工程10の完成記事を読み込む
2. 導入部〜中盤までをWordPress用HTMLに変換
3. 見出しにIDを付与（目次対応）
4. Early CTA、Mid CTAをボタンブロックに変換
5. 工程11に基づき画像プレースホルダーを配置

## タスク2: 記事本文のHTML変換（後半）
1. 中盤〜まとめまでをWordPress用HTMLに変換
2. Final CTAをボタンブロックに変換
3. 残りの画像プレースホルダーを配置

## タスク3: FAQ構造化データの追加
1. FAQセクションを特定
2. Schema.org構造化データ（FAQPage）を追加
3. Q&A形式に整形

## タスク4: 最終確認と完成版出力
1. HTML全体の整合性を確認
2. アイキャッチ画像設定の指示を追加
3. WordPress投稿手順を記載
4. 完成版HTMLを出力

---

【期待する出力】

## 工程12_WordPress用HTML.html

```html
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>[記事タイトル] - WordPress用HTML</title>
</head>
<body>

<!--
=============================================
WordPress投稿手順
=============================================
1. <body>内のHTMLをコピー
2. WordPress新規投稿 → カスタムHTMLブロック
3. 貼り付け → 「ブロックへ変換」
4. 画像プレースホルダーを実際の画像に置換
5. アイキャッチ画像を設定
6. プレビュー確認 → 公開
=============================================
-->

<!-- アイキャッチ画像設定指示 -->
<!--
ファイル名: [推奨ファイル名]
alt属性: [alt属性テキスト]
-->

<h1>[記事タイトル]</h1>

<p>導入文...</p>

<!-- Early CTA -->
<div class="wp-block-buttons is-layout-flex">
<div class="wp-block-button">
<a class="wp-block-button__link wp-element-button" href="[URL]">[CTAテキスト]</a>
</div>
</div>

<h2 id="section-1">[見出し1]</h2>

<p>本文...</p>

<!-- 画像挿入位置: 1 -->
<figure class="wp-block-image size-large">
<img src="#IMAGE_PLACEHOLDER_1" alt="[alt属性]">
<figcaption>[キャプション]</figcaption>
</figure>

（以下続く...）

<!-- FAQ（構造化データ付き） -->
<div itemscope itemtype="https://schema.org/FAQPage">
<h2 id="faq">よくある質問（FAQ）</h2>
<div itemscope itemprop="mainEntity" itemtype="https://schema.org/Question">
<h3 itemprop="name">Q1. 質問文</h3>
<div itemscope itemprop="acceptedAnswer" itemtype="https://schema.org/Answer">
<p itemprop="text">回答文</p>
</div>
</div>
</div>

</body>
</html>
```

---

【WordPress用HTMLの変換ルール】

## 見出し
- `## 見出し` → `<h2 id="section-[番号]">見出し</h2>`
- `### 小見出し` → `<h3 id="section-[H2番号]-[H3番号]">小見出し</h3>`

## 段落
- 通常テキスト → `<p>テキスト</p>`

## リスト
- `- 項目` → `<ul><li>項目</li></ul>`
- `1. 項目` → `<ol><li>項目</li></ol>`

## 強調
- `**太字**` → `<strong>太字</strong>`

## CTA
- ボタンブロック形式に変換
```html
<div class="wp-block-buttons is-layout-flex">
<div class="wp-block-button">
<a class="wp-block-button__link wp-element-button" href="[URL]">[テキスト]</a>
</div>
</div>
```

## 画像プレースホルダー
```html
<figure class="wp-block-image size-large">
<img src="#IMAGE_PLACEHOLDER_[番号]" alt="[alt属性]">
<figcaption>[キャプション]</figcaption>
</figure>
```

---

【保存ファイル】
- 工程12_WordPress用HTML.html

---

**【重要】**
- 全ての見出しにIDを付与（目次プラグイン対応）
- FAQにはSchema.org構造化データを追加
- CTAは工程0で定義されたものを使用
- 画像プレースホルダーは工程11の提案に基づく
- WordPressで「ブロックへ変換」後に編集しやすい構造にする

```